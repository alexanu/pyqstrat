
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>pyqstrat package &#8212; pyqstrat 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="pyqstrat" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pyqstrat-package">
<h1>pyqstrat package<a class="headerlink" href="#pyqstrat-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pyqstrat.pq_utils">
<span id="pyqstrat-pq-utils-module"></span><h2>pyqstrat.pq_utils module<a class="headerlink" href="#module-pyqstrat.pq_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pyqstrat.pq_utils.async_sleep">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">async_sleep</code><span class="sig-paren">(</span><em class="sig-param">secs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#async_sleep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.async_sleep" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.async_waitfor">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">async_waitfor</code><span class="sig-paren">(</span><em class="sig-param">predicate_func</em>, <em class="sig-param">timeout_secs=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#async_waitfor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.async_waitfor" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep yielding until either predicate is true or timeout elapses
Returns when predicate is True.  If timeout elapses we raise an exception</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.async_yield">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">async_yield</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#async_yield"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.async_yield" title="Permalink to this definition">¶</a></dt>
<dd><p>yield so any other async tasks that are ready can run</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.date_2_num">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">date_2_num</code><span class="sig-paren">(</span><em class="sig-param">d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#date_2_num"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.date_2_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Adopted from matplotlib.mdates.date2num so we don’t have to add a dependency on matplotlib here</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.day_of_week_num">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">day_of_week_num</code><span class="sig-paren">(</span><em class="sig-param">a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#day_of_week_num"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.day_of_week_num" title="Permalink to this definition">¶</a></dt>
<dd><p>From <a class="reference external" href="https://stackoverflow.com/questions/52398383/finding-day-of-the-week-for-a-datetime64">https://stackoverflow.com/questions/52398383/finding-day-of-the-week-for-a-datetime64</a>
Get day of week for a numpy array of datetimes
Monday is 0, Sunday is 6</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>a</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – numpy datetime64 or array of datetime64</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Monday is 0, Sunday is 6</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int or numpy ndarray of int</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">day_of_week_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2015-01-04&#39;</span><span class="p">))</span>
<span class="go">6</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.day_symbol">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">day_symbol</code><span class="sig-paren">(</span><em class="sig-param">day_int</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#day_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.day_symbol" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.get_child_logger">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">get_child_logger</code><span class="sig-paren">(</span><em class="sig-param">child_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_child_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_child_logger" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.get_empty_np_value">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">get_empty_np_value</code><span class="sig-paren">(</span><em class="sig-param">np_dtype</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_empty_np_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_empty_np_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get empty value for a given numpy datatype
&gt;&gt;&gt; a = np.array([‘2018-01-01’, ‘2018-01-03’], dtype = ‘M8[D]’)
&gt;&gt;&gt; get_empty_np_value(a.dtype)
numpy.datetime64(‘NaT’)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.get_main_logger">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">get_main_logger</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_main_logger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_main_logger" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.get_temp_dir">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">get_temp_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#get_temp_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.get_temp_dir" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.has_display">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">has_display</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#has_display"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.has_display" title="Permalink to this definition">¶</a></dt>
<dd><p>If we are running in unit test mode or on a server, then don’t try to draw graphs, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.in_ipython">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">in_ipython</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#in_ipython"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.in_ipython" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether we are running in an ipython (or Jupyter) environment</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.infer_compression">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">infer_compression</code><span class="sig-paren">(</span><em class="sig-param">input_filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#infer_compression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.infer_compression" title="Permalink to this definition">¶</a></dt>
<dd><p>Infers compression for a file from its suffix.  For example, given “/tmp/hello.gz”, this will return “gzip”
&gt;&gt;&gt; infer_compression(“/tmp/hello.gz”)
‘gzip’
&gt;&gt;&gt; infer_compression(“/tmp/abc.txt”) is None
True</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.infer_frequency">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">infer_frequency</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#infer_frequency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.infer_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns most common frequency of date differences as a fraction of days
:type timestamps: <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
:param timestamps: A numpy array of monotonically increasing datetime64</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-01 11:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 11:15:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 11:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 11:35:00&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[ns]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">infer_frequency</span><span class="p">(</span><span class="n">timestamps</span><span class="p">),</span> <span class="mi">8</span><span class="p">))</span>
<span class="go">0.01041667</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.is_newer">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">is_newer</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">ref_filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#is_newer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.is_newer" title="Permalink to this definition">¶</a></dt>
<dd><p>whether filename ctime (modfication time) is newer than ref_filename or either file does not exist
&gt;&gt;&gt; import time
&gt;&gt;&gt; import tempfile
&gt;&gt;&gt; temp_dir = tempfile.gettempdir()
&gt;&gt;&gt; touch(f’{temp_dir}/x.txt’)
&gt;&gt;&gt; time.sleep(0.1)
&gt;&gt;&gt; touch(f’{temp_dir}/y.txt’)
&gt;&gt;&gt; is_newer(f’{temp_dir}/y.txt’, f’{temp_dir}/x.txt’)
True
&gt;&gt;&gt; touch(f’{temp_dir}/y.txt’)
&gt;&gt;&gt; time.sleep(0.1)
&gt;&gt;&gt; touch(f’{temp_dir}/x.txt’)
&gt;&gt;&gt; is_newer(f’{temp_dir}/y.txt’, f’{temp_dir}/x.txt’)
False</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.linear_interpolate">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">linear_interpolate</code><span class="sig-paren">(</span><em class="sig-param">a1</em>, <em class="sig-param">a2</em>, <em class="sig-param">x1</em>, <em class="sig-param">x2</em>, <em class="sig-param">x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#linear_interpolate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.linear_interpolate" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;{linear_interpolate(3, 4, 8, 10, 8.9):.3f}&#39;</span><span class="p">)</span>
<span class="go">3.450</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.millis_since_epoch">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">millis_since_epoch</code><span class="sig-paren">(</span><em class="sig-param">dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#millis_since_epoch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.millis_since_epoch" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a python datetime, return number of milliseconds between the unix epoch and the datetime.
Returns a float since it can contain fractions of milliseconds as well
&gt;&gt;&gt; millis_since_epoch(datetime.datetime(2018, 1, 1))
1514764800000.0</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.monotonically_increasing">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">monotonically_increasing</code><span class="sig-paren">(</span><em class="sig-param">array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#monotonically_increasing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.monotonically_increasing" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the array is monotonically_increasing, False otherwise</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">monotonically_increasing</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-03&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[D]&#39;</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monotonically_increasing</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-02&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[D]&#39;</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.nan_to_zero">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">nan_to_zero</code><span class="sig-paren">(</span><em class="sig-param">array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#nan_to_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.nan_to_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts any nans in a numpy float array to 0</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.np_find_closest">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">np_find_closest</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">v</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_find_closest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_find_closest" title="Permalink to this definition">¶</a></dt>
<dd><p>From <a class="reference external" href="https://stackoverflow.com/questions/8914491/finding-the-nearest-value-and-return-the-index-of-array-in-python">https://stackoverflow.com/questions/8914491/finding-the-nearest-value-and-return-the-index-of-array-in-python</a>
Find index of closest value to array v in array a.  Returns an array of the same size as v
a must be sorted
&gt;&gt;&gt; assert(all(np_find_closest(np.array([3, 4, 6]), np.array([4, 2])) == np.array([1, 0])))</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.np_get_index">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">np_get_index</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_get_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_get_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Get index of a value in a numpy array.  Returns -1 if the value does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.np_rolling_window">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">np_rolling_window</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">window</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_rolling_window"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_rolling_window" title="Permalink to this definition">¶</a></dt>
<dd><p>For applying rolling window functions to a numpy array
See: <a class="reference external" href="https://stackoverflow.com/questions/6811183/rolling-window-for-1d-arrays-in-numpy">https://stackoverflow.com/questions/6811183/rolling-window-for-1d-arrays-in-numpy</a>
&gt;&gt;&gt; print(np.std(np_rolling_window(np.array([1, 2, 3, 4]), 2), 1))
[0.5 0.5 0.5]</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.np_round">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">np_round</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">clip</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#np_round"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.np_round" title="Permalink to this definition">¶</a></dt>
<dd><p>Round all elements in an array to the nearest clip</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – array with elements to round</p></li>
<li><p><strong>clip</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – rounding value</p></li>
</ul>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np_round</span><span class="p">(</span><span class="mf">15.8</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="go">15.75</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.percentile_of_score">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">percentile_of_score</code><span class="sig-paren">(</span><em class="sig-param">a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#percentile_of_score"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.percentile_of_score" title="Permalink to this definition">¶</a></dt>
<dd><p>For each element in a, find the percentile of a its in.  From stackoverflow.com/a/29989971/5351549
Like scipy.stats.percentileofscore but runs in O(n log(n)) time.
&gt;&gt;&gt; a = np.array([4, 3, 1, 2, 4.1])
&gt;&gt;&gt; percentiles = percentile_of_score(a)
&gt;&gt;&gt; assert(all(np.isclose(np.array([ 75.,  50.,   0.,  25., 100.]), percentiles)))</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.remove_dups">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">remove_dups</code><span class="sig-paren">(</span><em class="sig-param">l</em>, <em class="sig-param">key_func=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#remove_dups"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.remove_dups" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove duplicates from a list
:type l: <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]
:param l: list to remove duplicates from
:type key_func: <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]
:param key_func: A function that takes a list element and converts it to a key for detecting dups</p>
<p>Returns (List): A list with duplicates removed.  This is stable in the sense that original list elements will retain their order</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">remove_dups</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]))</span>
<span class="go">[&#39;a&#39;, &#39;d&#39;, &#39;c&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">remove_dups</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]))</span>
<span class="go">[&#39;a&#39;, &#39;d&#39;, &#39;A&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">remove_dups</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">],</span> <span class="n">key_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">upper</span><span class="p">()))</span>
<span class="go">[&#39;a&#39;, &#39;d&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.resample_trade_bars">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">resample_trade_bars</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">sampling_frequency</em>, <em class="sig-param">resample_funcs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#resample_trade_bars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.resample_trade_bars" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsample trade bars using sampling frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – Must contain an index of numpy datetime64 type which is monotonically increasing</p></li>
<li><p><strong>sampling_frequency</strong> (<em>str</em>) – See pandas frequency strings</p></li>
<li><p><strong>(</strong><strong>dict of str</strong> (<em>resample_funcs</em>) – int): a dictionary of column name -&gt; resampling function for any columns that are custom defined.  Default None.
If there is no entry for a custom column, defaults to ‘last’ for that column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Resampled dataframe</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-08 15:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09 13:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09 15:00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-11 15:00:00&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[ns]&#39;</span><span class="p">),</span>
<span class="gp">... </span>         <span class="s1">&#39;o&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.9</span><span class="p">,</span> <span class="mf">9.1</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">,</span> <span class="mf">8.6</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">9.0</span><span class="p">,</span> <span class="mf">9.3</span><span class="p">,</span> <span class="mf">9.4</span><span class="p">,</span> <span class="mf">8.7</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;l&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.8</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">9.2</span><span class="p">,</span> <span class="mf">8.4</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.95</span><span class="p">,</span> <span class="mf">9.2</span><span class="p">,</span> <span class="mf">9.35</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;v&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">300</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">400</span><span class="p">])</span>
<span class="gp">... </span>        <span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;vwap&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">l</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">resample_trade_bars</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">sampling_frequency</span> <span class="o">=</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">resample_funcs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">df</span><span class="p">,</span>
<span class="gp">... </span>  <span class="n">sampling_frequency</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">sampling_frequency</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">vwap</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">9.24</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">vwap</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">l</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mf">8.4</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.resample_ts">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">resample_ts</code><span class="sig-paren">(</span><em class="sig-param">dates</em>, <em class="sig-param">values</em>, <em class="sig-param">sampling_frequency</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#resample_ts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.resample_ts" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsample a tuple of datetimes and value arrays using sampling frequency, using the last value if it does not exist at the bin edge.
See pandas.Series.resample</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy datetime64 array</p></li>
<li><p><strong>values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – See pandas frequency strings</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Resampled tuple of datetime and value arrays</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.resample_vwap">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">resample_vwap</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">sampling_frequency</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#resample_vwap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.resample_vwap" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute weighted average of vwap given higher frequency vwap and volume</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.series_to_array">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">series_to_array</code><span class="sig-paren">(</span><em class="sig-param">series</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#series_to_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.series_to_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a pandas series to a numpy array.  If the object is not a pandas Series return it back unchanged</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.set_defaults">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">set_defaults</code><span class="sig-paren">(</span><em class="sig-param">df_float_sf=8</em>, <em class="sig-param">df_display_max_rows=200</em>, <em class="sig-param">df_display_max_columns=99</em>, <em class="sig-param">np_seterr='raise'</em>, <em class="sig-param">plot_style='ggplot'</em>, <em class="sig-param">mpl_figsize=(8</em>, <em class="sig-param">6)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#set_defaults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.set_defaults" title="Permalink to this definition">¶</a></dt>
<dd><p>Set some display defaults to make it easier to view dataframes and graphs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_float_sf</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of significant figures to show in dataframes (default 4). Set to None to use pandas defaults</p></li>
<li><p><strong>df_display_max_rows</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of rows to display for pandas dataframes when you print them (default 200).  Set to None to use pandas defaults</p></li>
<li><p><strong>df_display_max_columns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of columns to display for pandas dataframes when you print them (default 99).  Set to None to use pandas defaults</p></li>
<li><p><strong>np_seterr</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Error mode for numpy warnings.  See numpy seterr function for details.  Set to None to use numpy defaults</p></li>
<li><p><strong>plot_style</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Style for matplotlib plots.  Set to None to use default plot style.</p></li>
<li><p><strong>mpl_figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – Default figure size to use when displaying matplotlib plots (default 8,6).  Set to None to use defaults</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.shift_np">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">shift_np</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">n</em>, <em class="sig-param">fill_value=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#shift_np"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.shift_np" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to pandas.Series.shift but works on numpy arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – The numpy array to shift</p></li>
<li><p><strong>n</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of places to shift, can be positive or negative</p></li>
<li><p><strong>fill_value</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – After shifting, there will be empty slots left in the array.  If set, fill these with fill_value.
If fill_value is set to None (default), we will fill these with False for boolean arrays, np.nan for floats</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.str2date">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">str2date</code><span class="sig-paren">(</span><em class="sig-param">s</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#str2date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.str2date" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a string like “2008-01-15 15:00:00” to a numpy datetime64.  If s is not a string, return s back</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.strtup2date">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">strtup2date</code><span class="sig-paren">(</span><em class="sig-param">tup</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#strtup2date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.strtup2date" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a string tuple like (“2008-01-15”, “2009-01-16”) to a numpy datetime64 tuple.
If the tuple does not contain strings, return it back unchanged</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.to_csv">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">to_csv</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">file_name</em>, <em class="sig-param">index=False</em>, <em class="sig-param">compress=False</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#to_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a temporary file then renames to the permanent file so we don’t have half written files.
Also optionally compresses using the xz algorithm</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.touch">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">touch</code><span class="sig-paren">(</span><em class="sig-param">fname</em>, <em class="sig-param">mode=438</em>, <em class="sig-param">dir_fd=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#touch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.touch" title="Permalink to this definition">¶</a></dt>
<dd><p>replicate unix touch command, i.e create file if it doesn’t exist, otherwise update timestamp</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pq_utils.zero_to_nan">
<code class="sig-prename descclassname">pyqstrat.pq_utils.</code><code class="sig-name descname">zero_to_nan</code><span class="sig-paren">(</span><em class="sig-param">array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_utils.html#zero_to_nan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_utils.zero_to_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts any zeros in a numpy array to nans</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.pq_types">
<span id="pyqstrat-pq-types-module"></span><h2>pyqstrat.pq_types module<a class="headerlink" href="#module-pyqstrat.pq_types" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.pq_types.Contract">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">Contract</code><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Contract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.Contract" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pq_types.Contract.clear">
<em class="property">static </em><code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Contract.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.Contract.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>When running Python interactively you may create a Contract with a given symbol multiple times because you don’t restart Python
therefore global variables are not cleared.  This function clears global Contracts</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.Contract.contracts_by_symbol">
<code class="sig-name descname">contracts_by_symbol</code><em class="property"> = None</em><a class="headerlink" href="#pyqstrat.pq_types.Contract.contracts_by_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>A contract such as a stock, option or a future that can be traded</p>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pq_types.Contract.create">
<em class="property">static </em><code class="sig-name descname">create</code><span class="sig-paren">(</span><em class="sig-param">symbol</em>, <em class="sig-param">contract_group</em>, <em class="sig-param">expiry=None</em>, <em class="sig-param">multiplier=1.0</em>, <em class="sig-param">properties=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Contract.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.Contract.create" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A unique string reprenting this contract. e.g IBM or ESH9</p></li>
<li><p><strong>contract_group</strong> (<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>) – We sometimes need to group contracts for calculating PNL, for example, you may have a strategy
which has 3 legs, a long option, a short option and a future or equity used to hedge delta.  In this case, you will be trading
different symbols over time as options and futures expire, but you may want to track PNL for each leg using a contract group for each leg.
So you could create contract groups ‘Long Option’, ‘Short Option’ and ‘Hedge’ and assign contracts to these.</p></li>
<li><p><strong>expiry</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – In the case of a future or option, the date and time when the
contract expires.  For equities and other non expiring contracts, set this to None.  Default None.</p></li>
<li><p><strong>multiplier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – If the market price convention is per unit, and the unit is not the same as contract size,
set the multiplier here. For example, for E-mini contracts, each contract is 50 units and the price is per unit,
so multiplier would be 50.  Default 1</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any data you want to store with this contract.
For example, you may want to store option strike.  Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.ContractGroup">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">ContractGroup</code><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A way to group contracts for figuring out which indicators, rules and signals to apply to a contract and for PNL reporting</p>
<dl class="method">
<dt id="pyqstrat.pq_types.ContractGroup.add_contract">
<code class="sig-name descname">add_contract</code><span class="sig-paren">(</span><em class="sig-param">contract</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup.add_contract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.add_contract" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pq_types.ContractGroup.clear">
<em class="property">static </em><code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>When running Python interactively you may create a ContractGroup with a given name multiple times because you don’t restart Python
therefore global variables are not cleared.  This function clears global ContractGroups</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pq_types.ContractGroup.create">
<em class="property">static </em><code class="sig-name descname">create</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.create" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Name of the group</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pq_types.ContractGroup.get_contract">
<code class="sig-name descname">get_contract</code><span class="sig-paren">(</span><em class="sig-param">symbol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ContractGroup.get_contract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.ContractGroup.get_contract" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.LimitOrder">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">LimitOrder</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">qty</em>, <em class="sig-param">limit_price</em>, <em class="sig-param">reason_code='none'</em>, <em class="sig-param">properties=None</em>, <em class="sig-param">status='open'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#LimitOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.LimitOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pq_types.Order</span></code></a></p>
<dl class="method">
<dt id="pyqstrat.pq_types.LimitOrder.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">qty</em>, <em class="sig-param">limit_price</em>, <em class="sig-param">reason_code='none'</em>, <em class="sig-param">properties=None</em>, <em class="sig-param">status='open'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#LimitOrder.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.LimitOrder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract this order is for</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Time the order was placed</p></li>
<li><p><strong>qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number of contracts or shares.  Use a negative quantity for sell orders</p></li>
<li><p><strong>limit_price</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Limit price (float)</p></li>
<li><p><strong>reason_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The reason this order was created.
Prefer a predefined constant from the ReasonCode class if it matches your reason for creating this order.
Default None</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any order specific data we want to store.  Default None</p></li>
<li><p><strong>status</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Status of the order, “open”, “filled”, etc. (default “open”)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.MarketOrder">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">MarketOrder</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">qty</em>, <em class="sig-param">reason_code='none'</em>, <em class="sig-param">properties=None</em>, <em class="sig-param">status='open'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#MarketOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.MarketOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pq_types.Order</span></code></a></p>
<dl class="method">
<dt id="pyqstrat.pq_types.MarketOrder.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">qty</em>, <em class="sig-param">reason_code='none'</em>, <em class="sig-param">properties=None</em>, <em class="sig-param">status='open'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#MarketOrder.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.MarketOrder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract this order is for</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Time the order was placed</p></li>
<li><p><strong>qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number of contracts or shares.  Use a negative quantity for sell orders</p></li>
<li><p><strong>reason_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The reason this order was created.
Prefer a predefined constant from the ReasonCode class if it matches your reason for creating this order.
Default None</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any order specific data we want to store.  Default None</p></li>
<li><p><strong>status</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Status of the order, “open”, “filled”, etc. Default “open”</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.Order">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">Order</code><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Order"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.Order" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.OrderStatus">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">OrderStatus</code><a class="reference internal" href="_modules/pyqstrat/pq_types.html#OrderStatus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.OrderStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Enum for order status</p>
<dl class="attribute">
<dt id="pyqstrat.pq_types.OrderStatus.FILLED">
<code class="sig-name descname">FILLED</code><em class="property"> = 'filled'</em><a class="headerlink" href="#pyqstrat.pq_types.OrderStatus.FILLED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.OrderStatus.OPEN">
<code class="sig-name descname">OPEN</code><em class="property"> = 'open'</em><a class="headerlink" href="#pyqstrat.pq_types.OrderStatus.OPEN" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.ReasonCode">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">ReasonCode</code><a class="reference internal" href="_modules/pyqstrat/pq_types.html#ReasonCode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class containing constants for predefined order reason codes. Prefer these predefined reason codes if they suit
the reason you are creating your order.  Otherwise, use your own string.</p>
<dl class="attribute">
<dt id="pyqstrat.pq_types.ReasonCode.BACKTEST_END">
<code class="sig-name descname">BACKTEST_END</code><em class="property"> = 'backtest end'</em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.BACKTEST_END" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.ReasonCode.ENTER_LONG">
<code class="sig-name descname">ENTER_LONG</code><em class="property"> = 'enter long'</em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.ENTER_LONG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.ReasonCode.ENTER_SHORT">
<code class="sig-name descname">ENTER_SHORT</code><em class="property"> = 'enter short'</em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.ENTER_SHORT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.ReasonCode.EXIT_LONG">
<code class="sig-name descname">EXIT_LONG</code><em class="property"> = 'exit long'</em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.EXIT_LONG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.ReasonCode.EXIT_SHORT">
<code class="sig-name descname">EXIT_SHORT</code><em class="property"> = 'exit short'</em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.EXIT_SHORT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.ReasonCode.MARKER_PROPERTIES">
<code class="sig-name descname">MARKER_PROPERTIES</code><em class="property"> = {'backtest end': {'color': 'green', 'size': 50, 'symbol': '*'}, 'enter long': {'color': 'blue', 'size': 50, 'symbol': 'P'}, 'enter short': {'color': 'red', 'size': 50, 'symbol': 'P'}, 'exit long': {'color': 'blue', 'size': 50, 'symbol': 'X'}, 'exit short': {'color': 'red', 'size': 50, 'symbol': 'X'}, 'none': {'color': 'green', 'size': 50, 'symbol': 'o'}, 'roll future': {'color': 'green', 'size': 50, 'symbol': '&gt;'}}</em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.MARKER_PROPERTIES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.ReasonCode.NONE">
<code class="sig-name descname">NONE</code><em class="property"> = 'none'</em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.NONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pq_types.ReasonCode.ROLL_FUTURE">
<code class="sig-name descname">ROLL_FUTURE</code><em class="property"> = 'roll future'</em><a class="headerlink" href="#pyqstrat.pq_types.ReasonCode.ROLL_FUTURE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.RollOrder">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">RollOrder</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">close_qty</em>, <em class="sig-param">reopen_qty</em>, <em class="sig-param">reason_code='roll future'</em>, <em class="sig-param">properties=None</em>, <em class="sig-param">status='open'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#RollOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.RollOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pq_types.Order</span></code></a></p>
<p>A roll order is used to roll a future from one series to the next.  It represents a sell of one future and the buying of another future.</p>
<dl class="method">
<dt id="pyqstrat.pq_types.RollOrder.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">close_qty</em>, <em class="sig-param">reopen_qty</em>, <em class="sig-param">reason_code='roll future'</em>, <em class="sig-param">properties=None</em>, <em class="sig-param">status='open'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#RollOrder.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.RollOrder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract this order is for</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Time the order was placed</p></li>
<li><p><strong>close_qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Quantity of the future you are rolling</p></li>
<li><p><strong>reopen_qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Quantity of the future you are rolling to</p></li>
<li><p><strong>reason_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The reason this order was created.
Prefer a predefined constant from the ReasonCode class if it matches your reason for creating this order.
Default None</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any order specific data we want to store.  Default None</p></li>
<li><p><strong>status</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Status of the order, “open”, “filled”, etc. (default “open”)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.StopLimitOrder">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">StopLimitOrder</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">qty</em>, <em class="sig-param">trigger_price</em>, <em class="sig-param">limit_price=nan</em>, <em class="sig-param">reason_code='none'</em>, <em class="sig-param">properties=None</em>, <em class="sig-param">status='open'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#StopLimitOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.StopLimitOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pq_types.Order</span></code></a></p>
<p>Used for stop loss or stop limit orders.  The order is triggered when price goes above or below trigger price, depending on whether this is a short
or long order.  Becomes either a market or limit order at that point, depending on whether you set the limit price or not.</p>
<dl class="method">
<dt id="pyqstrat.pq_types.StopLimitOrder.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">qty</em>, <em class="sig-param">trigger_price</em>, <em class="sig-param">limit_price=nan</em>, <em class="sig-param">reason_code='none'</em>, <em class="sig-param">properties=None</em>, <em class="sig-param">status='open'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#StopLimitOrder.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.StopLimitOrder.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract this order is for</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Time the order was placed</p></li>
<li><p><strong>qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number of contracts or shares.  Use a negative quantity for sell orders</p></li>
<li><p><strong>trigger_price</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Order becomes a market or limit order if price crosses trigger_price.</p></li>
<li><p><strong>limit_price</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – If not set (default), order becomes a market order when price crosses trigger price.
Otherwise it becomes a limit order.  Default np.nan</p></li>
<li><p><strong>reason_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The reason this order was created.
Prefer a predefined constant from the ReasonCode class if it matches your reason for creating this order.
Default None</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any order specific data we want to store.  Default None</p></li>
<li><p><strong>status</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Status of the order, “open”, “filled”, etc. (default “open”)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pq_types.Trade">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pq_types.</code><code class="sig-name descname">Trade</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">order</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">qty</em>, <em class="sig-param">price</em>, <em class="sig-param">fee=0.0</em>, <em class="sig-param">commission=0.0</em>, <em class="sig-param">properties=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Trade"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.Trade" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pq_types.Trade.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">order</em>, <em class="sig-param">timestamp</em>, <em class="sig-param">qty</em>, <em class="sig-param">price</em>, <em class="sig-param">fee=0.0</em>, <em class="sig-param">commission=0.0</em>, <em class="sig-param">properties=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/pq_types.html#Trade.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.pq_types.Trade.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>) – The contract we traded</p></li>
<li><p><strong>order</strong> (<a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a>) – A reference to the order that created this trade. Default None</p></li>
<li><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – Trade execution datetime</p></li>
<li><p><strong>qty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Number of contracts or shares filled</p></li>
<li><p><strong>price</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Trade price</p></li>
<li><p><strong>fee</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Fees paid to brokers or others. Default 0</p></li>
<li><p><strong>commision</strong> – Commission paid to brokers or others. Default 0</p></li>
<li><p><strong>properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – Any data you want to store with this contract.
For example, you may want to store bid / ask prices at time of trade.  Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyqstrat.holiday_calendars">
<span id="pyqstrat-holiday-calendars-module"></span><h2>pyqstrat.holiday_calendars module<a class="headerlink" href="#module-pyqstrat.holiday_calendars" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.holiday_calendars.Calendar">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.holiday_calendars.</code><code class="sig-name descname">Calendar</code><span class="sig-paren">(</span><em class="sig-param">holidays</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="pyqstrat.holiday_calendars.Calendar.EUREX">
<code class="sig-name descname">EUREX</code><em class="property"> = 'eurex'</em><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.EUREX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.holiday_calendars.Calendar.NYSE">
<code class="sig-name descname">NYSE</code><em class="property"> = 'nyse'</em><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.NYSE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.holiday_calendars.Calendar.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">holidays</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Do not use this function directly.  Use Calendar.get_calendar instead
:type holidays: <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>
:param holidays: holidays for this calendar, excluding weekends
:type holidays: np.array of datetime64[D]</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.holiday_calendars.Calendar.add_calendar">
<em class="property">static </em><code class="sig-name descname">add_calendar</code><span class="sig-paren">(</span><em class="sig-param">exchange_name</em>, <em class="sig-param">holidays</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.add_calendar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.add_calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a trading calendar to the class level calendars dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exchange_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the exchange.</p></li>
<li><p><strong>holidays</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – holidays for this exchange, excluding weekends</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.holiday_calendars.Calendar.add_trading_days">
<code class="sig-name descname">add_trading_days</code><span class="sig-paren">(</span><em class="sig-param">start</em>, <em class="sig-param">num_days</em>, <em class="sig-param">roll='raise'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.add_trading_days"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.add_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds trading days to a start date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">date</span></code>]) – start datetimes(s)</p></li>
<li><p><strong>num_days</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of trading days to add</p></li>
<li><p><strong>roll</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – one of ‘raise’, ‘nat’, ‘forward’, ‘following’, ‘backward’, ‘preceding’, ‘modifiedfollowing’, ‘modifiedpreceding’ or ‘allow’}
‘allow’ is a special case in which case, adding 1 day to a holiday will act as if it was not a holiday, and give you the next business day’
The rest of the values are the same as in the numpy busday_offset function
From numpy documentation:
How to treat dates that do not fall on a valid day. The default is ‘raise’.
‘raise’ means to raise an exception for an invalid day.
‘nat’ means to return a NaT (not-a-time) for an invalid day.
‘forward’ and ‘following’ mean to take the first valid day later in time.
‘backward’ and ‘preceding’ mean to take the first valid day earlier in time.
‘modifiedfollowing’ means to take the first valid day later in time unless it is across a Month boundary,
in which case to take the first valid day earlier in time.
‘modifiedpreceding’ means to take the first valid day earlier in time unless it is across a Month boundary,
in which case to take the first valid day later in time.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The datetime num_days trading days after start</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2015-12-28&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2017-04-15&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">roll</span> <span class="o">=</span> <span class="s1">&#39;preceding&#39;</span><span class="p">)</span> <span class="c1"># 4/14/2017 is a Friday and a holiday</span>
<span class="go">numpy.datetime64(&#39;2017-04-13&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2017-04-08&#39;</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">roll</span> <span class="o">=</span> <span class="s1">&#39;preceding&#39;</span><span class="p">)</span> <span class="c1"># 4/7/2017 is a Friday and not a holiday</span>
<span class="go">numpy.datetime64(&#39;2017-04-07&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2019-02-17 15:25&#39;</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">roll</span> <span class="o">=</span> <span class="s1">&#39;allow&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2019-02-19T15:25&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calendar</span><span class="o">.</span><span class="n">add_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2019-02-17 15:25&#39;</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">roll</span> <span class="o">=</span> <span class="s1">&#39;allow&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2019-02-15T15:25&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.holiday_calendars.Calendar.get_calendar">
<em class="property">static </em><code class="sig-name descname">get_calendar</code><span class="sig-paren">(</span><em class="sig-param">exchange_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.get_calendar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.get_calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a calendar object for the given exchange:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exchange_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The exchange for which you want a calendar.  Calendar.NYSE, Calendar.EUREX are predefined.</p></li>
<li><p><strong>you want to add a new calendar</strong><strong>, </strong><strong>use the add_calendar class level function</strong> (<em>If</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pyqstrat.holiday_calendars.Calendar" title="pyqstrat.holiday_calendars.Calendar"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calendar</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The calendar object</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.holiday_calendars.Calendar.get_trading_days">
<code class="sig-name descname">get_trading_days</code><span class="sig-paren">(</span><em class="sig-param">start</em>, <em class="sig-param">end</em>, <em class="sig-param">include_first=False</em>, <em class="sig-param">include_last=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.get_trading_days"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.get_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Get back a list of numpy dates that are trading days between the start and end</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="s1">&#39;2005-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2005-01-08&#39;</span><span class="p">)</span>
<span class="go">array([&#39;2005-01-03&#39;, &#39;2005-01-04&#39;, &#39;2005-01-05&#39;, &#39;2005-01-06&#39;, &#39;2005-01-07&#39;], dtype=&#39;datetime64[D]&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">array([&#39;2005-01-03&#39;, &#39;2005-01-04&#39;, &#39;2005-01-05&#39;, &#39;2005-01-06&#39;,</span>
<span class="go">       &#39;2005-01-07&#39;, &#39;2005-01-10&#39;, &#39;2005-01-11&#39;, &#39;2005-01-12&#39;,</span>
<span class="go">       &#39;2005-01-13&#39;, &#39;2005-01-14&#39;, &#39;2005-01-18&#39;, &#39;2005-01-19&#39;,</span>
<span class="go">       &#39;2005-01-20&#39;, &#39;2005-01-21&#39;, &#39;2005-01-24&#39;, &#39;2005-01-25&#39;,</span>
<span class="go">       &#39;2005-01-26&#39;, &#39;2005-01-27&#39;, &#39;2005-01-28&#39;, &#39;2005-01-31&#39;, &#39;2005-02-01&#39;], dtype=&#39;datetime64[D]&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">29</span><span class="p">),</span> <span class="n">include_last</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([&#39;2016-01-06&#39;, &#39;2016-01-07&#39;, &#39;2016-01-08&#39;, &#39;2016-01-11&#39;,</span>
<span class="go">       &#39;2016-01-12&#39;, &#39;2016-01-13&#39;, &#39;2016-01-14&#39;, &#39;2016-01-15&#39;,</span>
<span class="go">       &#39;2016-01-19&#39;, &#39;2016-01-20&#39;, &#39;2016-01-21&#39;, &#39;2016-01-22&#39;,</span>
<span class="go">       &#39;2016-01-25&#39;, &#39;2016-01-26&#39;, &#39;2016-01-27&#39;, &#39;2016-01-28&#39;], dtype=&#39;datetime64[D]&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="s1">&#39;2017-07-04&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-07-08&#39;</span><span class="p">,</span> <span class="n">include_first</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([&#39;2017-07-05&#39;, &#39;2017-07-06&#39;, &#39;2017-07-07&#39;], dtype=&#39;datetime64[D]&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2017-07-04&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2017-07-08&#39;</span><span class="p">),</span> <span class="n">include_first</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">array([&#39;2017-07-05&#39;, &#39;2017-07-06&#39;, &#39;2017-07-07&#39;], dtype=&#39;datetime64[D]&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.holiday_calendars.Calendar.is_trading_day">
<code class="sig-name descname">is_trading_day</code><span class="sig-paren">(</span><em class="sig-param">dates</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.is_trading_day"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.is_trading_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the date is not a holiday or a weekend</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dates</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">date</span></code>]) – date times to check</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether this date is a trading day</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">EUREX</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span><span class="o">.</span><span class="n">is_trading_day</span><span class="p">(</span><span class="s1">&#39;2016-12-25&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span><span class="o">.</span><span class="n">is_trading_day</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">22</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">is_trading_day</span><span class="p">(</span><span class="s1">&#39;2017-04-01&#39;</span><span class="p">)</span> <span class="c1"># Weekend</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">is_trading_day</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="s1">&#39;2017-04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-04-09&#39;</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">))</span> 
<span class="go">array([False, False,  True,  True,  True,  True,  True, False]...)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.holiday_calendars.Calendar.num_trading_days">
<code class="sig-name descname">num_trading_days</code><span class="sig-paren">(</span><em class="sig-param">start</em>, <em class="sig-param">end</em>, <em class="sig-param">include_first=False</em>, <em class="sig-param">include_last=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.num_trading_days"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.num_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of trading days between two date series including those two dates</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">EUREX</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eurex</span><span class="o">.</span><span class="n">num_trading_days</span><span class="p">(</span><span class="s1">&#39;2009-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-12-31&#39;</span><span class="p">)</span>
<span class="go">772</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">increments</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">29</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="n">action</span> <span class="o">=</span> <span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">PerformanceWarning</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dates2</span> <span class="o">=</span> <span class="n">dates</span> <span class="o">+</span> <span class="n">increments</span> <span class="o">*</span> <span class="n">dates</span><span class="o">.</span><span class="n">freq</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">dates</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="n">dates2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">formatter</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;float&#39;</span> <span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{x:.1f}</span><span class="s1">&#39;</span><span class="p">})</span>  <span class="c1"># After numpy 1.13 positive floats don&#39;t have a leading space for sign</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">nyse</span><span class="o">.</span><span class="n">num_trading_days</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
<span class="go">[3.0 0.0 1.0 5.0 nan 8.0 nan 20.0]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.holiday_calendars.Calendar.third_friday_of_month">
<code class="sig-name descname">third_friday_of_month</code><span class="sig-paren">(</span><em class="sig-param">month</em>, <em class="sig-param">year</em>, <em class="sig-param">roll='backward'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#Calendar.third_friday_of_month"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.Calendar.third_friday_of_month" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="n">get_calendar</span><span class="p">(</span><span class="n">Calendar</span><span class="o">.</span><span class="n">NYSE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nyse</span><span class="o">.</span><span class="n">third_friday_of_month</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2017</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2017-03-17&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.holiday_calendars.get_date_from_weekday">
<code class="sig-prename descclassname">pyqstrat.holiday_calendars.</code><code class="sig-name descname">get_date_from_weekday</code><span class="sig-paren">(</span><em class="sig-param">weekday</em>, <em class="sig-param">year</em>, <em class="sig-param">month</em>, <em class="sig-param">week</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#get_date_from_weekday"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.get_date_from_weekday" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the date that falls on a given weekday (Monday = 0) on a week, year and month
&gt;&gt;&gt; get_date_from_weekday(1, 2019, 10, 4)
numpy.datetime64(‘2019-10-22’)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.holiday_calendars.read_holidays">
<code class="sig-prename descclassname">pyqstrat.holiday_calendars.</code><code class="sig-name descname">read_holidays</code><span class="sig-paren">(</span><em class="sig-param">calendar_name</em>, <em class="sig-param">dirname=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/holiday_calendars.html#read_holidays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.holiday_calendars.read_holidays" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a csv with a holidays column containing holidays (not including weekends)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.account">
<span id="pyqstrat-account-module"></span><h2>pyqstrat.account module<a class="headerlink" href="#module-pyqstrat.account" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.account.Account">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.account.</code><code class="sig-name descname">Account</code><span class="sig-paren">(</span><em class="sig-param">contract_groups</em>, <em class="sig-param">timestamps</em>, <em class="sig-param">price_function</em>, <em class="sig-param">strategy_context</em>, <em class="sig-param">starting_equity=1000000.0</em>, <em class="sig-param">pnl_calc_time=900</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An Account calculates pnl for a set of contracts</p>
<dl class="method">
<dt id="pyqstrat.account.Account.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">contract_groups</em>, <em class="sig-param">timestamps</em>, <em class="sig-param">price_function</em>, <em class="sig-param">strategy_context</em>, <em class="sig-param">starting_equity=1000000.0</em>, <em class="sig-param">pnl_calc_time=900</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_groups</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – Contract groups that we want to compute PNL for</p></li>
<li><p><strong>timestamps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Timestamps that we might compute PNL at</p></li>
<li><p><strong>price_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Function that returns contract prices used to compute pnl</p></li>
<li><p><strong>strategy_context</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>) – This is passed into the price function so we can use current state of strategy to compute prices</p></li>
<li><p><strong>starting_equity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Starting equity in account currency.  Default 1.e6</p></li>
<li><p><strong>pnl_calc_time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of minutes past midnight that we should calculate PNL at.  Default 15 * 60, i.e. 3 pm</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.add_trades">
<code class="sig-name descname">add_trades</code><span class="sig-paren">(</span><em class="sig-param">trades</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.add_trades"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.add_trades" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.calc">
<code class="sig-name descname">calc</code><span class="sig-paren">(</span><em class="sig-param">timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.calc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.calc" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes P&amp;L and stores it internally for all contracts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>) – timestamp to compute P&amp;L at.  Account remembers the last timestamp it computed P&amp;L up to and will compute P&amp;L
between these and including timestamp. If there is more than one day between the last index and current index, we will
include pnl for at the defined pnl_calc_time for those dates as well.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.df_account_pnl">
<code class="sig-name descname">df_account_pnl</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.df_account_pnl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.df_account_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns PNL at the account level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>contract_group</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – If set, we only return pnl for this contract_group.  Otherwise we return pnl for all contract groups</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.df_pnl">
<code class="sig-name descname">df_pnl</code><span class="sig-paren">(</span><em class="sig-param">contract_groups=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.df_pnl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.df_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with P&amp;L columns broken down by contract group and symbol</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>contract_group</strong> – Return PNL for this contract group.  If None (default), include all contract groups</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.df_trades">
<code class="sig-name descname">df_trades</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.df_trades"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.df_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe of trades</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_group</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – Return trades for this contract group. If None (default), include all contract groups</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Include trades with date greater than or equal to this timestamp.</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Include trades with date less than or equal to this timestamp.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.equity">
<code class="sig-name descname">equity</code><span class="sig-paren">(</span><em class="sig-param">timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.equity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.equity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns equity in this account in Account currency.  Will cause calculation if Account has not previously
calculated up to this date</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.position">
<code class="sig-name descname">position</code><span class="sig-paren">(</span><em class="sig-param">contract_group</em>, <em class="sig-param">timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.position" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns netted position for a contract_group at a given date in number of contracts or shares.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.positions">
<code class="sig-name descname">positions</code><span class="sig-paren">(</span><em class="sig-param">contract_group</em>, <em class="sig-param">timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all non-zero positions in a contract group</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.symbols">
<code class="sig-name descname">symbols</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.symbols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.symbols" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.Account.trades">
<code class="sig-name descname">trades</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#Account.trades"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.Account.trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of trades with the given symbol and with trade date between (and including) start date
and end date if they are specified. If symbol is None trades for all symbols are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MutableSequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Trade" title="pyqstrat.pq_types.Trade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.account.ContractPNL">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.account.</code><code class="sig-name descname">ContractPNL</code><span class="sig-paren">(</span><em class="sig-param">contract</em>, <em class="sig-param">account_timestamps</em>, <em class="sig-param">price_function</em>, <em class="sig-param">strategy_context</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Computes pnl for a single contract over time given trades and market data</p>
<dl class="method">
<dt id="pyqstrat.account.ContractPNL.calc_net_pnl">
<code class="sig-name descname">calc_net_pnl</code><span class="sig-paren">(</span><em class="sig-param">timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.calc_net_pnl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.calc_net_pnl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.ContractPNL.df">
<code class="sig-name descname">df</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.df" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pandas dataframe with pnl data</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.ContractPNL.net_pnl">
<code class="sig-name descname">net_pnl</code><span class="sig-paren">(</span><em class="sig-param">timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.net_pnl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.net_pnl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.ContractPNL.pnl">
<code class="sig-name descname">pnl</code><span class="sig-paren">(</span><em class="sig-param">timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.pnl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.pnl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.account.ContractPNL.position">
<code class="sig-name descname">position</code><span class="sig-paren">(</span><em class="sig-param">timestamp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#ContractPNL.position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.ContractPNL.position" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.account.calc_trade_pnl">
<code class="sig-prename descclassname">pyqstrat.account.</code><code class="sig-name descname">calc_trade_pnl</code><span class="sig-paren">(</span><em class="sig-param">open_qtys</em>, <em class="sig-param">open_prices</em>, <em class="sig-param">new_qtys</em>, <em class="sig-param">new_prices</em>, <em class="sig-param">multiplier</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#calc_trade_pnl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.calc_trade_pnl" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">calc_trade_pnl</span><span class="p">(</span>
<span class="gp">... </span>         <span class="n">open_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">),</span> <span class="n">open_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">),</span>
<span class="gp">... </span>           <span class="n">new_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">]),</span> <span class="n">new_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">6</span><span class="p">]),</span> <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">100</span><span class="p">))</span>
<span class="go">(array([-3.]), array([6.]), -3.0, 6.0, -1300.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">calc_trade_pnl</span><span class="p">(</span><span class="n">open_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">),</span> <span class="n">open_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">),</span> <span class="n">new_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">]),</span>
<span class="gp">... </span>         <span class="n">new_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">51</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">45</span><span class="p">]),</span> <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">100</span><span class="p">))</span>
<span class="go">(array([8.]), array([50.]), 8.0, 50.0, -2800.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">calc_trade_pnl</span><span class="p">(</span><span class="n">open_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]),</span> <span class="n">open_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]),</span>
<span class="gp">... </span>               <span class="n">new_qtys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">58</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">39</span><span class="p">]),</span>
<span class="gp">... </span>               <span class="n">new_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2080</span><span class="p">,</span> <span class="mf">2075.25</span><span class="p">,</span> <span class="mf">2070.75</span><span class="p">,</span> <span class="mi">2076</span><span class="p">,</span> <span class="mf">2066.75</span><span class="p">,</span> <span class="mf">2069.25</span><span class="p">,</span> <span class="mf">2074.75</span><span class="p">,</span> <span class="mf">2069.75</span><span class="p">,</span> <span class="mf">2087.25</span><span class="p">,</span> <span class="mf">2097.25</span><span class="p">,</span> <span class="mi">2106</span><span class="p">,</span> <span class="mf">2088.25</span><span class="p">,</span> <span class="mf">2085.25</span><span class="p">]),</span>
<span class="gp">... </span>               <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">50</span><span class="p">))</span>
<span class="go">(array([], dtype=float64), array([], dtype=float64), 0.0, 0, -33762.5)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.account.find_index_before">
<code class="sig-prename descclassname">pyqstrat.account.</code><code class="sig-name descname">find_index_before</code><span class="sig-paren">(</span><em class="sig-param">sorted_dict</em>, <em class="sig-param">key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#find_index_before"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.find_index_before" title="Permalink to this definition">¶</a></dt>
<dd><p>Find index of the first key in a sorted dict that is less than or equal to the key passed in.
If the key is less than the first key in the dict, return -1</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.account.find_last_non_nan_index">
<code class="sig-prename descclassname">pyqstrat.account.</code><code class="sig-name descname">find_last_non_nan_index</code><span class="sig-paren">(</span><em class="sig-param">array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#find_last_non_nan_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.find_last_non_nan_index" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.account.leading_nan_to_zero">
<code class="sig-prename descclassname">pyqstrat.account.</code><code class="sig-name descname">leading_nan_to_zero</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">columns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#leading_nan_to_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.leading_nan_to_zero" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.account.test_account">
<code class="sig-prename descclassname">pyqstrat.account.</code><code class="sig-name descname">test_account</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/account.html#test_account"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.account.test_account" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-pyqstrat.strategy">
<span id="pyqstrat-strategy-module"></span><h2>pyqstrat.strategy module<a class="headerlink" href="#module-pyqstrat.strategy" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.strategy.Strategy">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.strategy.</code><code class="sig-name descname">Strategy</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">contract_groups</em>, <em class="sig-param">price_function</em>, <em class="sig-param">starting_equity=1000000.0</em>, <em class="sig-param">pnl_calc_time=901</em>, <em class="sig-param">trade_lag=0</em>, <em class="sig-param">run_final_calc=True</em>, <em class="sig-param">strategy_context=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="pyqstrat.strategy.Strategy.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">contract_groups</em>, <em class="sig-param">price_function</em>, <em class="sig-param">starting_equity=1000000.0</em>, <em class="sig-param">pnl_calc_time=901</em>, <em class="sig-param">trade_lag=0</em>, <em class="sig-param">run_final_calc=True</em>, <em class="sig-param">strategy_context=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>np.array of np.datetime64</em>) – The “heartbeat” of the strategy.  We will evaluate trading rules and
simulate the market at these times.</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – The contract groups we will potentially trade.</p></li>
<li><p><strong>price_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pq_types.Contract" title="pyqstrat.pq_types.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – A function that returns the price of a contract at a given timestamp</p></li>
<li><p><strong>starting_equity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Starting equity in Strategy currency.  Default 1.e6</p></li>
<li><p><strong>pnl_calc_time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Time of day used to calculate PNL.  Default 15 * 60 (3 pm)</p></li>
<li><p><strong>trade_lag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of bars you want between the order and the trade.  For example, if you think it will take
5 seconds to place your order in the market, and your bar size is 1 second, set this to 5.  Set this to 0 if you
want to execute your trade at the same time as you place the order, for example, if you have daily bars.  Default 0.</p></li>
<li><p><strong>run_final_calc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, calculates unrealized pnl and net pnl as well as realized pnl when strategy is done.
If you don’t need unrealized pnl, turn this off for faster run time. Default True</p></li>
<li><p><strong>strategy_context</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>]) – A storage class where you can store key / value pairs relevant to this strategy.
For example, you may have a pre-computed table of correlations that you use in the indicator or trade rule functions.
If not set, the __init__ function will create an empty member strategy_context object that you can access.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.add_indicator">
<code class="sig-name descname">add_indicator</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">indicator</em>, <em class="sig-param">contract_groups=None</em>, <em class="sig-param">depends_on=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.add_indicator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.add_indicator" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the indicator</p></li>
<li><p><strong>indicator</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]) – A function that takes strategy timestamps and other indicators and returns a numpy array
containing indicator values.  The return array must have the same length as the timestamps object.
Can also be a numpy array or a pandas Series in which case we just store the values.</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract groups that this indicator applies to.  If not set, it applies to all contract groups. Default None.</p></li>
<li><p><strong>depends_on</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – Names of other indicators that we need to compute this indicator. Default None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.add_market_sim">
<code class="sig-name descname">add_market_sim</code><span class="sig-paren">(</span><em class="sig-param">market_sim_function</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.add_market_sim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.add_market_sim" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a market simulator.  A market simulator is a function that takes orders as input and returns trades.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.add_rule">
<code class="sig-name descname">add_rule</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">rule_function</em>, <em class="sig-param">signal_name</em>, <em class="sig-param">sig_true_values=None</em>, <em class="sig-param">position_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.add_rule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.add_rule" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Add a trading rule.  Trading rules are guaranteed to run in the order in which you add them.  For example, if you set trade_lag to 0,</dt><dd><p>and want to exit positions and re-enter new ones in the same bar, make sure you add the exit rule before you add the entry rule to the
strategy.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the trading rule</p></li>
<li><p><strong>rule_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <a class="reference internal" href="#pyqstrat.account.Account" title="pyqstrat.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleNamespace</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a>]]) – A trading rule function that returns a list of Orders</p></li>
<li><p><strong>signal_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The strategy will call the trading rule function when the signal with this name matches sig_true_values</p></li>
<li><p><strong>sig_true_values</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[+T_co]]) – If the signal value at a bar is equal to one of these values,
the Strategy will call the trading rule function.  Default [TRUE]</p></li>
<li><p><strong>position_filter</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Can be “zero”, “nonzero” or None.  Zero rules are only triggered when the corresponding contract positions are 0
Nonzero rules are only triggered when the corresponding contract positions are non-zero.
If not set, we don’t look at position before triggering the rule. Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.add_signal">
<code class="sig-name descname">add_signal</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">signal_function</em>, <em class="sig-param">contract_groups=None</em>, <em class="sig-param">depends_on_indicators=None</em>, <em class="sig-param">depends_on_signals=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.add_signal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.add_signal" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the signal</p></li>
<li><p><strong>signal_function</strong> (<em>function</em>) – A function that takes timestamps and a dictionary of indicator value arrays and
returns a numpy array
containing signal values.  The return array must have the same length as the input timestamps</p></li>
<li><p><strong>contract_groups</strong> (list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ContractGroup</span></code>, optional) – Contract groups that this signal applies to.
If not set, it applies to all contract groups.  Default None.</p></li>
<li><p><strong>depends_on_indicators</strong> (<em>list of str</em><em>, </em><em>optional</em>) – Names of indicators that we need to compute this signal. Default None.</p></li>
<li><p><strong>depends_on_signals</strong> (<em>list of str</em><em>, </em><em>optional</em>) – Names of other signals that we need to compute this signal. Default None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.df_data">
<code class="sig-name descname">df_data</code><span class="sig-paren">(</span><em class="sig-param">contract_groups=None</em>, <em class="sig-param">add_pnl=True</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Add indicators and signals to end of market data and return as a pandas dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_groups</strong> (list of:obj:<cite>ContractGroup</cite>, optional) – list of contract groups to include.  All if set to None (default)</p></li>
<li><p><strong>add_pnl</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True (default), include P&amp;L columns in dataframe</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – string or numpy datetime64. Default None</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – string or numpy datetime64: Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.df_orders">
<code class="sig-name descname">df_orders</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with data from orders with the given contract group and with order date between (and including)
start date and end date
if they are specified. If contract_group is None orders for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.df_pnl">
<code class="sig-name descname">df_pnl</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_pnl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_pnl" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with P&amp;L columns.  If contract group is set to None (default), sums up P&amp;L across all contract groups</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.df_returns">
<code class="sig-name descname">df_returns</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em>, <em class="sig-param">sampling_frequency='D'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe of returns and equity indexed by date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_group</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]) – The contract group to get returns for.
If set to None (default), we return the sum of PNL for all contract groups</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Downsampling frequency.  Default is None.  See pandas frequency strings for possible values</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.df_trades">
<code class="sig-name descname">df_trades</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.df_trades"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.df_trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with data from trades with the given contract group and with trade date between (and including)
start date and end date
if they are specified. If contract_group is None trades for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.evaluate_returns">
<code class="sig-name descname">evaluate_returns</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em>, <em class="sig-param">plot=True</em>, <em class="sig-param">display_summary=True</em>, <em class="sig-param">float_precision=4</em>, <em class="sig-param">return_metrics=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.evaluate_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.evaluate_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of common return metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_group</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">ContractGroup</span></code>, optional) – Contract group to evaluate or None (default) for all contract groups</p></li>
<li><p><strong>plot</strong> (<em>bool</em>) – If set to True, display plots of equity, drawdowns and returns.  Default False</p></li>
<li><p><strong>float_precision</strong> (<em>float</em><em>, </em><em>optional</em>) – Number of significant figures to show in returns.  Default 4</p></li>
<li><p><strong>return_metrics</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set, we return the computed metrics as a dictionary</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[~KT, +VT_co]]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.orders">
<code class="sig-name descname">orders</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of orders with the given contract group and with order date between (and including) start date and
end date if they are specified.
If contract_group is None orders for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Order" title="pyqstrat.pq_types.Order"><code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">contract_groups=None</em>, <em class="sig-param">primary_indicators=None</em>, <em class="sig-param">primary_indicators_dual_axis=None</em>, <em class="sig-param">secondary_indicators=None</em>, <em class="sig-param">secondary_indicators_dual_axis=None</em>, <em class="sig-param">indicator_properties=None</em>, <em class="sig-param">signals=None</em>, <em class="sig-param">signal_properties=None</em>, <em class="sig-param">pnl_columns=None</em>, <em class="sig-param">title=None</em>, <em class="sig-param">figsize=(20</em>, <em class="sig-param">15)</em>, <em class="sig-param">date_range=None</em>, <em class="sig-param">date_format=None</em>, <em class="sig-param">sampling_frequency=None</em>, <em class="sig-param">trade_marker_properties=None</em>, <em class="sig-param">hspace=0.15</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot indicators, signals, trades, position, pnl</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract groups to plot or None (default) for all contract groups.</p></li>
<li><p><strong>indicators</strong> (<em>primary</em>) – List of indicators to plot in the main indicator section. Default None (plot everything)</p></li>
<li><p><strong>indicators</strong> – List of indicators to plot in the secondary indicator section. Default None (don’t plot anything)</p></li>
<li><p><strong>indicator_properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]]) – If set, we use the line color, line type indicated for the given indicators</p></li>
<li><p><strong>signals</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – Signals to plot.  Default None (plot everything).</p></li>
<li><p><strong>plot_equity</strong> – If set, we plot the equity curve.  Default is True</p></li>
<li><p><strong>title</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Title of plot. Default None</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – Figure size.  Default (20, 15)</p></li>
<li><p><strong>date_range</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – Used to restrict the date range of the graph. Default None</p></li>
<li><p><strong>date_format</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Date format for tick labels on x axis.  If set to None (default), will be selected based on date range.
See matplotlib date format strings</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Downsampling frequency.  The graph may get too busy if you have too many bars of data,
so you may want to downsample before plotting.  See pandas frequency strings for possible values. Default None.</p></li>
<li><p><strong>trade_marker_properties</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]]) – A dictionary of order reason code -&gt; marker shape, marker size, marker color for plotting trades
with different reason codes. By default we use the dictionary from the <code class="xref py py-obj docutils literal notranslate"><span class="pre">ReasonCode</span></code> class</p></li>
<li><p><strong>hspace</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Height (vertical) space between subplots.  Default is 0.15</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.plot_returns">
<code class="sig-name descname">plot_returns</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.plot_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.plot_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Display plots of equity, drawdowns and returns for the given contract group or for all contract groups if contract_group
is None (default)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.run" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.run_indicators">
<code class="sig-name descname">run_indicators</code><span class="sig-paren">(</span><em class="sig-param">indicator_names=None</em>, <em class="sig-param">contract_groups=None</em>, <em class="sig-param">clear_all=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.run_indicators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.run_indicators" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate values of the indicators specified and store them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>indicator_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – List of indicator names.  If None (default) run all indicators</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract group to run this indicator for.  If None (default), we run it for all contract groups.</p></li>
<li><p><strong>clear_all</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, clears all indicator values before running.  Default False.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.run_rules">
<code class="sig-name descname">run_rules</code><span class="sig-paren">(</span><em class="sig-param">rule_names=None</em>, <em class="sig-param">contract_groups=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.run_rules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.run_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>Run trading rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rule_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – List of rule names.  If None (default) run all rules</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract groups to run this rule for.  If None (default), we run it for all contract groups.</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Run rules starting from this date. Default None</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Don’t run rules after this date.  Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.run_signals">
<code class="sig-name descname">run_signals</code><span class="sig-paren">(</span><em class="sig-param">signal_names=None</em>, <em class="sig-param">contract_groups=None</em>, <em class="sig-param">clear_all=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.run_signals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.run_signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate values of the signals specified and store them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – List of signal names.  If None (default) run all signals</p></li>
<li><p><strong>contract_groups</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.ContractGroup" title="pyqstrat.pq_types.ContractGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractGroup</span></code></a>]]) – Contract groups to run this signal for. If None (default), we run it for all contract groups.</p></li>
<li><p><strong>clear_all</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, clears all signal values before running.  Default False.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.strategy.Strategy.trades">
<code class="sig-name descname">trades</code><span class="sig-paren">(</span><em class="sig-param">contract_group=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#Strategy.trades"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.Strategy.trades" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of trades with the given contract group and with trade date between (and including) start date
and end date if they are specified.
If contract_group is None trades for all contract_groups are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Trade" title="pyqstrat.pq_types.Trade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.strategy.test_strategy">
<code class="sig-prename descclassname">pyqstrat.strategy.</code><code class="sig-name descname">test_strategy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/strategy.html#test_strategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.strategy.test_strategy" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.strategy.Strategy" title="pyqstrat.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.portfolio">
<span id="pyqstrat-portfolio-module"></span><h2>pyqstrat.portfolio module<a class="headerlink" href="#module-pyqstrat.portfolio" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.portfolio.Portfolio">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.portfolio.</code><code class="sig-name descname">Portfolio</code><span class="sig-paren">(</span><em class="sig-param">name='main'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A portfolio contains one or more strategies that run concurrently so you can test running strategies that are uncorrelated together.</p>
<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name='main'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Args:
name: String used for displaying this portfolio</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.add_strategy">
<code class="sig-name descname">add_strategy</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">strategy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.add_strategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.add_strategy" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the strategy</p></li>
<li><p><strong>strategy</strong> (<a class="reference internal" href="#pyqstrat.strategy.Strategy" title="pyqstrat.strategy.Strategy"><code class="xref py py-class docutils literal notranslate"><span class="pre">Strategy</span></code></a>) – Strategy instance</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.df_returns">
<code class="sig-name descname">df_returns</code><span class="sig-paren">(</span><em class="sig-param">sampling_frequency='D'</em>, <em class="sig-param">strategy_names=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.df_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.df_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dataframe containing equity and returns with a date index.  Equity and returns are combined from all strategies passed in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Date frequency for rows.  Default ‘D’ for daily so we will have one row per day</p></li>
<li><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – By default this is set to None and we use all strategies.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.evaluate_returns">
<code class="sig-name descname">evaluate_returns</code><span class="sig-paren">(</span><em class="sig-param">sampling_frequency='D'</em>, <em class="sig-param">strategy_names=None</em>, <em class="sig-param">plot=True</em>, <em class="sig-param">float_precision=4</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.evaluate_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.evaluate_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of common return metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Date frequency.  Default ‘D’ for daily so we downsample to daily returns before computing metrics</p></li>
<li><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – By default this is set to None and we use all strategies.</p></li>
<li><p><strong>plot</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, display plots of equity, drawdowns and returns.  Default False</p></li>
<li><p><strong>float_precision</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of significant figures to show in returns.  Default 4</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[~KT, +VT_co]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">sampling_frequency='D'</em>, <em class="sig-param">strategy_names=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Display plots of equity, drawdowns and returns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Date frequency.  Default ‘D’ for daily so we downsample to daily returns before computing metrics</p></li>
<li><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of strategy names.  By default this is set to None and we use all strategies.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">strategy_names=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run indicators, signals and rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of strategy names.  By default this is set to None and we use all strategies.</p></li>
<li><p><strong>start_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Run rules starting from this date.
Sometimes we have a few strategies in a portfolio that need different lead times before they are ready to trade
so you can set this so they are all ready by this date.  Default None</p></li>
<li><p><strong>end_date</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>]) – Don’t run rules after this date.  Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.run_indicators">
<code class="sig-name descname">run_indicators</code><span class="sig-paren">(</span><em class="sig-param">strategy_names=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.run_indicators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.run_indicators" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute indicators for the strategies specified</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – By default this is set to None and we use all strategies.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.run_rules">
<code class="sig-name descname">run_rules</code><span class="sig-paren">(</span><em class="sig-param">strategy_names=None</em>, <em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.run_rules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.run_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>Run rules for the strategies specified.  Must be called after run_indicators and run_signals.
See run function for argument descriptions</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.portfolio.Portfolio.run_signals">
<code class="sig-name descname">run_signals</code><span class="sig-paren">(</span><em class="sig-param">strategy_names=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/portfolio.html#Portfolio.run_signals"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.portfolio.Portfolio.run_signals" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute signals for the strategies specified.  Must be called after run_indicators</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strategy_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – By default this is set to None and we use all strategies.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyqstrat.optimize">
<span id="pyqstrat-optimize-module"></span><h2>pyqstrat.optimize module<a class="headerlink" href="#module-pyqstrat.optimize" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.optimize.Experiment">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.optimize.</code><code class="sig-name descname">Experiment</code><span class="sig-paren">(</span><em class="sig-param">suggestion</em>, <em class="sig-param">cost</em>, <em class="sig-param">other_costs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An Experiment stores a suggestion and its result</p>
<dl class="method">
<dt id="pyqstrat.optimize.Experiment.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">suggestion</em>, <em class="sig-param">cost</em>, <em class="sig-param">other_costs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Experiment.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Experiment.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>suggestion</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – A dictionary of variable name -&gt; value</p></li>
<li><p><strong>cost</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – A float representing output of the function we are testing with this suggestion as input.</p></li>
<li><p><strong>other_costs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – A dictionary of other results we want to store and look at later.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.optimize.Experiment.valid">
<code class="sig-name descname">valid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Experiment.valid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Experiment.valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if all suggestions and costs are finite, i.e not NaN or +/- Infinity</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.optimize.Optimizer">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.optimize.</code><code class="sig-name descname">Optimizer</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">generator</em>, <em class="sig-param">cost_func</em>, <em class="sig-param">max_processes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Optimizer is used to optimize parameters for a strategy.</p>
<dl class="method">
<dt id="pyqstrat.optimize.Optimizer.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">generator</em>, <em class="sig-param">cost_func</em>, <em class="sig-param">max_processes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Display title for plotting, etc.</p></li>
<li><p><strong>generator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]], <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – A generator (see Python Generators) that takes no inputs and yields a dictionary with parameter name -&gt; parameter value.</p></li>
<li><p><strong>cost_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]]]) – A function that takes a dictionary of parameter name -&gt; parameter value as input and outputs cost for that set of parameters.</p></li>
<li><p><strong>max_processes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – If not set, the Optimizer will look at the number of CPU cores on your machine to figure out how many processes to run.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.optimize.Optimizer.df_experiments">
<code class="sig-name descname">df_experiments</code><span class="sig-paren">(</span><em class="sig-param">sort_column='cost'</em>, <em class="sig-param">ascending=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.df_experiments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.df_experiments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe containing experiment data, sorted by sort_column (default “cost”)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.optimize.Optimizer.experiment_list">
<code class="sig-name descname">experiment_list</code><span class="sig-paren">(</span><em class="sig-param">sort_order='lowest_cost'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.experiment_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.experiment_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of experiments we have run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sort_order</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Can be set to lowest_cost, highest_cost or sequence.
If set to sequence, experiments are returned in the sequence in which they were run</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.optimize.Experiment" title="pyqstrat.optimize.Experiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Experiment</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.optimize.Optimizer.plot_2d">
<code class="sig-name descname">plot_2d</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y='all'</em>, <em class="sig-param">plot_type='line'</em>, <em class="sig-param">figsize=(15</em>, <em class="sig-param">8)</em>, <em class="sig-param">marker='X'</em>, <em class="sig-param">marker_size=50</em>, <em class="sig-param">marker_color='r'</em>, <em class="sig-param">xlim=None</em>, <em class="sig-param">hspace=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.plot_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.plot_2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a 2D plot of the optimization output for plotting 1 parameter and costs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the parameter to plot on the x axis, corresponding to the same name in the generator.</p></li>
<li><p><strong>y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Can be one of:
“cost”
The name of another cost variable corresponding to the output from the cost function
“all”, which creates a subplot for cost plus all other costs</p></li>
<li><p><strong>plot_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – line or scatter (default line)</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Figure size</p></li>
<li><p><strong>marker</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Adds a marker to each point in x, y to show the actual data used for interpolation.  You can set this to None to turn markers off.</p></li>
<li><p><strong>hspace</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Vertical space between subplots</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.optimize.Optimizer.plot_3d">
<code class="sig-name descname">plot_3d</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">z='all'</em>, <em class="sig-param">plot_type='surface'</em>, <em class="sig-param">figsize=(15</em>, <em class="sig-param">15)</em>, <em class="sig-param">interpolation='linear'</em>, <em class="sig-param">cmap='viridis'</em>, <em class="sig-param">marker='X'</em>, <em class="sig-param">marker_size=50</em>, <em class="sig-param">marker_color='r'</em>, <em class="sig-param">xlim=None</em>, <em class="sig-param">ylim=None</em>, <em class="sig-param">hspace=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.plot_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.plot_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a 3D plot of the optimization output for plotting 2 parameters and costs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the parameter to plot on the x axis, corresponding to the same name in the generator.</p></li>
<li><p><strong>y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the parameter to plot on the y axis, corresponding to the same name in the generator.</p></li>
<li><p><strong>z</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Can be one of:
“cost”
The name of another cost variable corresponding to the output from the cost function
“all”, which creates a subplot for cost plus all other costs</p></li>
<li><p><strong>plot_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – surface or contour (default surface)</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Figure size</p></li>
<li><p><strong>interpolation</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Can be ‘linear’, ‘nearest’ or ‘cubic’ for plotting z points between the ones passed in.  See scipy.interpolate.griddata for details</p></li>
<li><p><strong>cmap</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Colormap to use (default viridis).  See matplotlib colormap for details</p></li>
<li><p><strong>marker</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Adds a marker to each point in x, y, z to show the actual data used for interpolation.  You can set this to None to turn markers off.</p></li>
<li><p><strong>hspace</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Vertical space between subplots</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.optimize.Optimizer.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">raise_on_error=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#Optimizer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.Optimizer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the optimizer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>raise_on_error</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, even if we are running a multiprocess optimization, any Exceptions will bubble up and stop the Optimizer.
This can be useful for debugging to see stack traces for Exceptions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.optimize.test_optimize">
<code class="sig-prename descclassname">pyqstrat.optimize.</code><code class="sig-name descname">test_optimize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/optimize.html#test_optimize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.optimize.test_optimize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-pyqstrat.plot">
<span id="pyqstrat-plot-module"></span><h2>pyqstrat.plot module<a class="headerlink" href="#module-pyqstrat.plot" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.plot.BarPlotAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">BarPlotAttributes</code><span class="sig-paren">(</span><em class="sig-param">color='red'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#BarPlotAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.BarPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.DisplayAttributes</span></code></a></p>
<dl class="attribute">
<dt id="pyqstrat.plot.BarPlotAttributes.color">
<code class="sig-name descname">color</code><em class="property"> = 'red'</em><a class="headerlink" href="#pyqstrat.plot.BarPlotAttributes.color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.BoxPlotAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">BoxPlotAttributes</code><span class="sig-paren">(</span><em class="sig-param">proportional_widths=True</em>, <em class="sig-param">show_means=True</em>, <em class="sig-param">show_all=True</em>, <em class="sig-param">show_outliers=False</em>, <em class="sig-param">notched=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#BoxPlotAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.DisplayAttributes</span></code></a></p>
<dl class="attribute">
<dt id="pyqstrat.plot.BoxPlotAttributes.proportional_widths">
<code class="sig-name descname">proportional_widths</code><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.proportional_widths" title="Permalink to this definition">¶</a></dt>
<dd><p>if set to True, the width each box in the boxplot will be proportional
to the number of items in its corresponding array</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.BoxPlotAttributes.show_means">
<code class="sig-name descname">show_means</code><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.show_means" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to display a marker where the mean is for each array</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.BoxPlotAttributes.show_outliers">
<code class="sig-name descname">show_outliers</code><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.show_outliers" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to show markers for outliers that are outside the whiskers.
Box is at Q1 = 25%, Q3 = 75% quantiles, whiskers are at Q1 - 1.5 * (Q3 - Q1), Q3 + 1.5 * (Q3 - Q1)</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.BoxPlotAttributes.notched">
<code class="sig-name descname">notched</code><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.notched" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to show notches indicating the confidence interval around the median</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">notched</code><em class="property"> = False</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">proportional_widths</code><em class="property"> = True</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.BoxPlotAttributes.show_all">
<code class="sig-name descname">show_all</code><em class="property"> = True</em><a class="headerlink" href="#pyqstrat.plot.BoxPlotAttributes.show_all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">show_means</code><em class="property"> = True</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">show_outliers</code><em class="property"> = False</em></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.BucketedValues">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">BucketedValues</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">bucket_names</em>, <em class="sig-param">bucket_values</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#BucketedValues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.BucketedValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.PlotData</span></code></a></p>
<dl class="simple">
<dt>Data in a subplot where we summarize properties of a numpy array.</dt><dd><p>For example, drawing a boxplot with percentiles.  x axis is a categorical</p>
</dd>
</dl>
<dl class="method">
<dt id="pyqstrat.plot.BucketedValues.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">bucket_names</em>, <em class="sig-param">bucket_values</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#BucketedValues.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.BucketedValues.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – name used for this data in a plot legend</p></li>
<li><p><strong>bucket_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – list of strings used on x axis labels</p></li>
<li><p><strong>bucket_values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – list of numpy arrays that are summarized in this plot</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.CandleStickPlotAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">CandleStickPlotAttributes</code><span class="sig-paren">(</span><em class="sig-param">colorup='darkgreen'</em>, <em class="sig-param">colordown='#F2583E'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#CandleStickPlotAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.CandleStickPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.DisplayAttributes</span></code></a></p>
<dl class="attribute">
<dt id="pyqstrat.plot.CandleStickPlotAttributes.colordown">
<code class="sig-name descname">colordown</code><em class="property"> = '#F2583E'</em><a class="headerlink" href="#pyqstrat.plot.CandleStickPlotAttributes.colordown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.CandleStickPlotAttributes.colorup">
<code class="sig-name descname">colorup</code><em class="property"> = 'darkgreen'</em><a class="headerlink" href="#pyqstrat.plot.CandleStickPlotAttributes.colorup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.ContourPlotAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">ContourPlotAttributes</code><span class="sig-paren">(</span><em class="sig-param">marker='X'</em>, <em class="sig-param">marker_size=50</em>, <em class="sig-param">marker_color='red'</em>, <em class="sig-param">interpolation='linear'</em>, <em class="sig-param">cmap='viridis'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#ContourPlotAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.DisplayAttributes</span></code></a></p>
<dl class="attribute">
<dt id="pyqstrat.plot.ContourPlotAttributes.cmap">
<code class="sig-name descname">cmap</code><em class="property"> = 'viridis'</em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.cmap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.ContourPlotAttributes.interpolation">
<code class="sig-name descname">interpolation</code><em class="property"> = 'linear'</em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.interpolation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.ContourPlotAttributes.marker">
<code class="sig-name descname">marker</code><em class="property"> = 'X'</em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.marker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.ContourPlotAttributes.marker_color">
<code class="sig-name descname">marker_color</code><em class="property"> = 'red'</em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.marker_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.ContourPlotAttributes.marker_size">
<code class="sig-name descname">marker_size</code><em class="property"> = 50</em><a class="headerlink" href="#pyqstrat.plot.ContourPlotAttributes.marker_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.DateFormatter">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">DateFormatter</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">fmt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#DateFormatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.DateFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.ticker.Formatter</span></code></p>
<p>Formats timestamps on plot axes.  See matplotlib Formatter</p>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.DateLine">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">DateLine</code><span class="sig-paren">(</span><em class="sig-param">date</em>, <em class="sig-param">name=None</em>, <em class="sig-param">line_type='dashed'</em>, <em class="sig-param">color=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#DateLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.DateLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Draw a vertical line on a plot with a datetime x-axis</p>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.DisplayAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">DisplayAttributes</code><a class="reference internal" href="_modules/pyqstrat/plot.html#DisplayAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.DisplayAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.FilledLinePlotAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">FilledLinePlotAttributes</code><span class="sig-paren">(</span><em class="sig-param">positive_color='blue'</em>, <em class="sig-param">negative_color='red'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#FilledLinePlotAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.FilledLinePlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.DisplayAttributes</span></code></a></p>
<p>colorup: Color for bars where close &gt;= open.  Default “darkgreen”
colordown: Color for bars where open &lt; close.  Default “#F2583E”</p>
<dl class="attribute">
<dt id="pyqstrat.plot.FilledLinePlotAttributes.negative_color">
<code class="sig-name descname">negative_color</code><em class="property"> = 'red'</em><a class="headerlink" href="#pyqstrat.plot.FilledLinePlotAttributes.negative_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.FilledLinePlotAttributes.positive_color">
<code class="sig-name descname">positive_color</code><em class="property"> = 'blue'</em><a class="headerlink" href="#pyqstrat.plot.FilledLinePlotAttributes.positive_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.HorizontalLine">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">HorizontalLine</code><span class="sig-paren">(</span><em class="sig-param">y</em>, <em class="sig-param">name=None</em>, <em class="sig-param">line_type='dashed'</em>, <em class="sig-param">color=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#HorizontalLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.HorizontalLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Draws a horizontal line on a subplot</p>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.LinePlotAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">LinePlotAttributes</code><span class="sig-paren">(</span><em class="sig-param">line_type='solid'</em>, <em class="sig-param">line_width=None</em>, <em class="sig-param">color=None</em>, <em class="sig-param">marker=None</em>, <em class="sig-param">marker_size=None</em>, <em class="sig-param">marker_color=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#LinePlotAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.DisplayAttributes</span></code></a></p>
<dl class="attribute">
<dt id="pyqstrat.plot.LinePlotAttributes.color">
<code class="sig-name descname">color</code><em class="property"> = None</em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.LinePlotAttributes.line_type">
<code class="sig-name descname">line_type</code><em class="property"> = 'solid'</em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.line_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.LinePlotAttributes.line_width">
<code class="sig-name descname">line_width</code><em class="property"> = None</em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.line_width" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.LinePlotAttributes.marker">
<code class="sig-name descname">marker</code><em class="property"> = None</em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.marker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.LinePlotAttributes.marker_color">
<code class="sig-name descname">marker_color</code><em class="property"> = None</em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.marker_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.LinePlotAttributes.marker_size">
<code class="sig-name descname">marker_size</code><em class="property"> = None</em><a class="headerlink" href="#pyqstrat.plot.LinePlotAttributes.marker_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.Plot">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">Plot</code><span class="sig-paren">(</span><em class="sig-param">subplot_list</em>, <em class="sig-param">title=None</em>, <em class="sig-param">figsize=(15</em>, <em class="sig-param">8)</em>, <em class="sig-param">date_range=None</em>, <em class="sig-param">date_format=None</em>, <em class="sig-param">sampling_frequency=None</em>, <em class="sig-param">show_grid=True</em>, <em class="sig-param">show_date_gaps=True</em>, <em class="sig-param">hspace=0.15</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.Plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Top level plot containing a list of subplots to draw</p>
<dl class="method">
<dt id="pyqstrat.plot.Plot.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">subplot_list</em>, <em class="sig-param">title=None</em>, <em class="sig-param">figsize=(15</em>, <em class="sig-param">8)</em>, <em class="sig-param">date_range=None</em>, <em class="sig-param">date_format=None</em>, <em class="sig-param">sampling_frequency=None</em>, <em class="sig-param">show_grid=True</em>, <em class="sig-param">show_date_gaps=True</em>, <em class="sig-param">hspace=0.15</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Plot.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.Plot.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subplot_list</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.Subplot" title="pyqstrat.plot.Subplot"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subplot</span></code></a>]) – List of Subplot objects to draw</p></li>
<li><p><strong>title</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Title for this plot.  Default None</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Figure size.  Default (15, 8)</p></li>
<li><p><strong>date_range</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – Tuple of strings or numpy datetime64 limiting timestamps to draw.  e.g. (“2018-01-01 14:00”, “2018-01-05”). Default None</p></li>
<li><p><strong>date_format</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Date format to use for x-axis</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Set this to downsample subplots that have a datetime x axis.
For example, if you have minute bar data, you might want to subsample to hours if the plot is too crowded.
See pandas time frequency strings for possible values.  Default None</p></li>
<li><p><strong>show_grid</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, show a grid on the subplots.  Default True</p></li>
<li><p><strong>show_date_gaps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, then when there is a gap between timestamps will draw a dashed vertical line.
For example, you may have minute bars and a gap between end of trading day and beginning of next day.
Even if set to True, this will turn itself off if there are too many gaps to avoid clutter.  Default True</p></li>
<li><p><strong>hspace</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Height (vertical) space between subplots.  Default 0.15</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.plot.Plot.draw">
<code class="sig-name descname">draw</code><span class="sig-paren">(</span><em class="sig-param">check_data_size=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Plot.draw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.Plot.draw" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the subplots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>check_data_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set to True, will not plot if there are &gt; 100K points to avoid locking up your computer for a long time.
Default True</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.PlotData">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">PlotData</code><a class="reference internal" href="_modules/pyqstrat/plot.html#PlotData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.PlotData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.ScatterPlotAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">ScatterPlotAttributes</code><span class="sig-paren">(</span><em class="sig-param">marker='X'</em>, <em class="sig-param">marker_size=50</em>, <em class="sig-param">marker_color='red'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#ScatterPlotAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.ScatterPlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.DisplayAttributes</span></code></a></p>
<dl class="attribute">
<dt id="pyqstrat.plot.ScatterPlotAttributes.marker">
<code class="sig-name descname">marker</code><em class="property"> = 'X'</em><a class="headerlink" href="#pyqstrat.plot.ScatterPlotAttributes.marker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.ScatterPlotAttributes.marker_color">
<code class="sig-name descname">marker_color</code><em class="property"> = 'red'</em><a class="headerlink" href="#pyqstrat.plot.ScatterPlotAttributes.marker_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.ScatterPlotAttributes.marker_size">
<code class="sig-name descname">marker_size</code><em class="property"> = 50</em><a class="headerlink" href="#pyqstrat.plot.ScatterPlotAttributes.marker_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.Subplot">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">Subplot</code><span class="sig-paren">(</span><em class="sig-param">data_list</em>, <em class="sig-param">secondary_y=None</em>, <em class="sig-param">title=None</em>, <em class="sig-param">xlabel=None</em>, <em class="sig-param">ylabel=None</em>, <em class="sig-param">zlabel=None</em>, <em class="sig-param">date_lines=None</em>, <em class="sig-param">horizontal_lines=None</em>, <em class="sig-param">vertical_lines=None</em>, <em class="sig-param">xlim=None</em>, <em class="sig-param">ylim=None</em>, <em class="sig-param">height_ratio=1.0</em>, <em class="sig-param">display_legend=True</em>, <em class="sig-param">legend_loc='best'</em>, <em class="sig-param">log_y=False</em>, <em class="sig-param">y_tick_format=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Subplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.Subplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A top level plot contains a list of subplots, each of which contain a list of data objects to draw</p>
<dl class="method">
<dt id="pyqstrat.plot.Subplot.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">data_list</em>, <em class="sig-param">secondary_y=None</em>, <em class="sig-param">title=None</em>, <em class="sig-param">xlabel=None</em>, <em class="sig-param">ylabel=None</em>, <em class="sig-param">zlabel=None</em>, <em class="sig-param">date_lines=None</em>, <em class="sig-param">horizontal_lines=None</em>, <em class="sig-param">vertical_lines=None</em>, <em class="sig-param">xlim=None</em>, <em class="sig-param">ylim=None</em>, <em class="sig-param">height_ratio=1.0</em>, <em class="sig-param">display_legend=True</em>, <em class="sig-param">legend_loc='best'</em>, <em class="sig-param">log_y=False</em>, <em class="sig-param">y_tick_format=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Subplot.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.Subplot.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_list</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotData</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotData</span></code></a>]]) – A list of objects to draw.  Each element can contain XYData, XYZData, TimeSeries, TradeBarSeries,
BucketedValues or TradeSet</p></li>
<li><p><strong>secondary_y</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of objects to draw on the secondary y axis</p></li>
<li><p><strong>title</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Title to show for this subplot. Default None</p></li>
<li><p><strong>zlabel</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Only applicable to 3d subplots.  Default None</p></li>
<li><p><strong>date_lines</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.DateLine" title="pyqstrat.plot.DateLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateLine</span></code></a>]]) – A list of DateLine objects to draw as vertical lines. Only applicable when x axis is datetime.
Default None</p></li>
<li><p><strong>horizontal_lines</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.HorizontalLine" title="pyqstrat.plot.HorizontalLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">HorizontalLine</span></code></a>]]) – A list of HorizontalLine objects to draw on the plot.  Default None</p></li>
<li><p><strong>vertical_lines</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.plot.VerticalLine" title="pyqstrat.plot.VerticalLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">VerticalLine</span></code></a>]]) – A list of VerticalLine objects to draw on the plot</p></li>
<li><p><strong>xlim</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – x limits for the plot as a tuple of numpy datetime objects when x-axis is datetime,
or tuple of floats. Default None</p></li>
<li><p><strong>ylim</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – y limits for the plot.  Tuple of floats.  Default None</p></li>
<li><p><strong>height_ratio</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – If you have more than one subplot on a plot, use height ratio to determine how high each subplot should be.
For example, if you set height_ratio = 0.75 for the first subplot and 0.25 for the second,
the first will be 3 times taller than the second one. Default 1.0</p></li>
<li><p><strong>display_legend</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to show a legend on the plot.  Default True</p></li>
<li><p><strong>legend_loc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Location for the legend. Default ‘best’</p></li>
<li><p><strong>log_y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether the y axis should be logarithmic.  Default False</p></li>
<li><p><strong>y_tick_format</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Format string to use for y axis labels.  For example, you can decide to
use fixed notation instead of scientific notation or change number of decimal places shown.  Default None</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.plot.Subplot.get_all_timestamps">
<code class="sig-name descname">get_all_timestamps</code><span class="sig-paren">(</span><em class="sig-param">date_range</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#Subplot.get_all_timestamps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.Subplot.get_all_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.SurfacePlotAttributes">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">SurfacePlotAttributes</code><span class="sig-paren">(</span><em class="sig-param">marker='X'</em>, <em class="sig-param">marker_size=50</em>, <em class="sig-param">marker_color='red'</em>, <em class="sig-param">interpolation='linear'</em>, <em class="sig-param">cmap='viridis'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#SurfacePlotAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.DisplayAttributes" title="pyqstrat.plot.DisplayAttributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.DisplayAttributes</span></code></a></p>
<dl class="attribute">
<dt id="pyqstrat.plot.SurfacePlotAttributes.marker">
<code class="sig-name descname">marker</code><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.marker" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a marker to each point in x, y, z to show the actual data used for interpolation.
You can set this to None to turn markers off.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.SurfacePlotAttributes.interpolation">
<code class="sig-name descname">interpolation</code><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.interpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be ‘linear’, ‘nearest’ or ‘cubic’ for plotting z points between the ones passed in.
See scipy.interpolate.griddata for details</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.SurfacePlotAttributes.cmap">
<code class="sig-name descname">cmap</code><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.cmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Colormap to use (default viridis).  See matplotlib colormap for details</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">cmap</code><em class="property"> = 'viridis'</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">interpolation</code><em class="property"> = 'linear'</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">marker</code><em class="property"> = 'X'</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.SurfacePlotAttributes.marker_color">
<code class="sig-name descname">marker_color</code><em class="property"> = 'red'</em><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.marker_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.plot.SurfacePlotAttributes.marker_size">
<code class="sig-name descname">marker_size</code><em class="property"> = 50</em><a class="headerlink" href="#pyqstrat.plot.SurfacePlotAttributes.marker_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.TimePlotData">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">TimePlotData</code><a class="reference internal" href="_modules/pyqstrat/plot.html#TimePlotData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TimePlotData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.PlotData</span></code></a></p>
<dl class="method">
<dt id="pyqstrat.plot.TimePlotData.reindex">
<em class="property">abstract </em><code class="sig-name descname">reindex</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">fill</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimePlotData.reindex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TimePlotData.reindex" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.TimeSeries">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">TimeSeries</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">timestamps</em>, <em class="sig-param">values</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimeSeries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TimeSeries" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.TimePlotData" title="pyqstrat.plot.TimePlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.TimePlotData</span></code></a></p>
<p>Data in a subplot where x is an array of numpy datetimes and y is a numpy array of floats</p>
<dl class="method">
<dt id="pyqstrat.plot.TimeSeries.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">timestamps</em>, <em class="sig-param">values</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimeSeries.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TimeSeries.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name to show in plot legend</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.plot.TimeSeries.reindex">
<code class="sig-name descname">reindex</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">fill</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TimeSeries.reindex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TimeSeries.reindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Reindex this series given a new array of timestamps, forward filling holes if fill is set to True</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.TradeBarSeries">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">TradeBarSeries</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">timestamps</em>, <em class="sig-param">o</em>, <em class="sig-param">h</em>, <em class="sig-param">l</em>, <em class="sig-param">c</em>, <em class="sig-param">v=None</em>, <em class="sig-param">vwap=None</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeBarSeries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.TimePlotData" title="pyqstrat.plot.TimePlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.TimePlotData</span></code></a></p>
<p>Data in a subplot that contains open, high, low, close, volume bars.  volume is optional.</p>
<dl class="method">
<dt id="pyqstrat.plot.TradeBarSeries.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">timestamps</em>, <em class="sig-param">o</em>, <em class="sig-param">h</em>, <em class="sig-param">l</em>, <em class="sig-param">c</em>, <em class="sig-param">v=None</em>, <em class="sig-param">vwap=None</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeBarSeries.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name to show in a legend</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.plot.TradeBarSeries.df">
<code class="sig-name descname">df</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeBarSeries.df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.df" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.plot.TradeBarSeries.reindex">
<code class="sig-name descname">reindex</code><span class="sig-paren">(</span><em class="sig-param">all_timestamps</em>, <em class="sig-param">fill</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeBarSeries.reindex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TradeBarSeries.reindex" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.TradeSet">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">TradeSet</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">trades</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TradeSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.TimePlotData" title="pyqstrat.plot.TimePlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.TimePlotData</span></code></a></p>
<p>Data for subplot that contains a set of trades along with marker properties for these trades</p>
<dl class="method">
<dt id="pyqstrat.plot.TradeSet.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">trades</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeSet.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TradeSet.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – String to display in a subplot legend</p></li>
<li><p><strong>trades</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Trade" title="pyqstrat.pq_types.Trade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a>]) – List of Trade objects to plot</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.plot.TradeSet.reindex">
<code class="sig-name descname">reindex</code><span class="sig-paren">(</span><em class="sig-param">all_timestamps</em>, <em class="sig-param">fill</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#TradeSet.reindex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.TradeSet.reindex" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.VerticalLine">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">VerticalLine</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">name=None</em>, <em class="sig-param">line_type='dashed'</em>, <em class="sig-param">color=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#VerticalLine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.VerticalLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Draws a vertical line on a subplot where x axis is not a date-time axis</p>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.XYData">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">XYData</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#XYData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.XYData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.PlotData</span></code></a></p>
<p>Data in a subplot that has x and y values that are both arrays of floats</p>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.plot.XYZData">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">XYZData</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">z</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#XYZData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.XYZData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.plot.PlotData" title="pyqstrat.plot.PlotData"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.plot.PlotData</span></code></a></p>
<p>Data in a subplot that has x, y and z values that are all floats</p>
<dl class="method">
<dt id="pyqstrat.plot.XYZData.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">z</em>, <em class="sig-param">display_attributes=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#XYZData.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.XYZData.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name to show in plot legend</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.draw_3d_plot">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">draw_3d_plot</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">x</em>, <em class="sig-param">y</em>, <em class="sig-param">z</em>, <em class="sig-param">plot_type</em>, <em class="sig-param">marker='X'</em>, <em class="sig-param">marker_size=50</em>, <em class="sig-param">marker_color='red'</em>, <em class="sig-param">interpolation='linear'</em>, <em class="sig-param">cmap='viridis'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_3d_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.draw_3d_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw a 3d plot.  See XYZData class for explanation of arguments</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">has_display</span><span class="p">():</span>
<span class="gp">... </span>   <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="gp">... </span>   <span class="n">draw_3d_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="p">,</span> <span class="n">plot_type</span> <span class="o">=</span> <span class="s1">&#39;contour&#39;</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="s1">&#39;linear&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.draw_boxplot">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">draw_boxplot</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">names</em>, <em class="sig-param">values</em>, <em class="sig-param">proportional_widths=True</em>, <em class="sig-param">notched=False</em>, <em class="sig-param">show_outliers=True</em>, <em class="sig-param">show_means=True</em>, <em class="sig-param">show_all=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_boxplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.draw_boxplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw a boxplot.  See BucketedValues class for explanation of arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.draw_candlestick">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">draw_candlestick</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">index</em>, <em class="sig-param">o</em>, <em class="sig-param">h</em>, <em class="sig-param">l</em>, <em class="sig-param">c</em>, <em class="sig-param">v</em>, <em class="sig-param">vwap</em>, <em class="sig-param">colorup='darkgreen'</em>, <em class="sig-param">colordown='#F2583E'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_candlestick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.draw_candlestick" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw candlesticks given parrallel numpy arrays of o, h, l, c, v values.  v is optional.
See TradeBarSeries class __init__ for argument descriptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.draw_date_line">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">draw_date_line</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">plot_timestamps</em>, <em class="sig-param">date</em>, <em class="sig-param">linestyle</em>, <em class="sig-param">color</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_date_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.draw_date_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw vertical line on a subplot with datetime x axis</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Line2D</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.draw_horizontal_line">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">draw_horizontal_line</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">y</em>, <em class="sig-param">linestyle</em>, <em class="sig-param">color</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_horizontal_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.draw_horizontal_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw horizontal line on a subplot</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Line2D</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.draw_poly">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">draw_poly</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">left</em>, <em class="sig-param">bottom</em>, <em class="sig-param">top</em>, <em class="sig-param">right</em>, <em class="sig-param">facecolor</em>, <em class="sig-param">edgecolor</em>, <em class="sig-param">zorder</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_poly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.draw_poly" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw a set of polygrams given parrallel numpy arrays of left, bottom, top, right points</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.draw_vertical_line">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">draw_vertical_line</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">x</em>, <em class="sig-param">linestyle</em>, <em class="sig-param">color</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#draw_vertical_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.draw_vertical_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw vertical line on a subplot</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Line2D</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.get_date_formatter">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">get_date_formatter</code><span class="sig-paren">(</span><em class="sig-param">plot_timestamps</em>, <em class="sig-param">date_format</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#get_date_formatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.get_date_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an appropriate DateFormatter for x axis labels.
If date_format is set to None, figures out an appropriate date format based on the range of timestamps passed in</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.plot.DateFormatter" title="pyqstrat.plot.DateFormatter"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateFormatter</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.test_plot">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">test_plot</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#test_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.test_plot" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.plot.trade_sets_by_reason_code">
<code class="sig-prename descclassname">pyqstrat.plot.</code><code class="sig-name descname">trade_sets_by_reason_code</code><span class="sig-paren">(</span><em class="sig-param">trades</em>, <em class="sig-param">marker_props={'backtest end': {'color': 'green'</em>, <em class="sig-param">'size': 50</em>, <em class="sig-param">'symbol': '*'}</em>, <em class="sig-param">'enter long': {'color': 'blue'</em>, <em class="sig-param">'size': 50</em>, <em class="sig-param">'symbol': 'P'}</em>, <em class="sig-param">'enter short': {'color': 'red'</em>, <em class="sig-param">'size': 50</em>, <em class="sig-param">'symbol': 'P'}</em>, <em class="sig-param">'exit long': {'color': 'blue'</em>, <em class="sig-param">'size': 50</em>, <em class="sig-param">'symbol': 'X'}</em>, <em class="sig-param">'exit short': {'color': 'red'</em>, <em class="sig-param">'size': 50</em>, <em class="sig-param">'symbol': 'X'}</em>, <em class="sig-param">'none': {'color': 'green'</em>, <em class="sig-param">'size': 50</em>, <em class="sig-param">'symbol': 'o'}</em>, <em class="sig-param">'roll future': {'color': 'green'</em>, <em class="sig-param">'size': 50</em>, <em class="sig-param">'symbol': '&gt;'}}</em>, <em class="sig-param">remove_missing_properties=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/plot.html#trade_sets_by_reason_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.plot.trade_sets_by_reason_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of TradeSet objects.  Each TradeSet contains trades with a different reason code.  The markers for each TradeSet
are set by looking up marker properties for each reason code using the marker_props argument:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trades</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#pyqstrat.pq_types.Trade" title="pyqstrat.pq_types.Trade"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trade</span></code></a>]) – We look up reason codes using the reason code on the corresponding orders</p></li>
<li><p><strong>marker_props</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[~KT, +VT_co]]) – Dictionary from reason code string -&gt; dictionary of marker properties.
See ReasonCode.MARKER_PROPERTIES for example.  Default ReasonCode.MARKER_PROPERTIES</p></li>
<li><p><strong>remove_missing_properties</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, we remove any reason codes that dont’ have marker properties set.
Default True</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<a class="reference internal" href="#pyqstrat.plot.TradeSet" title="pyqstrat.plot.TradeSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">TradeSet</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.evaluator">
<span id="pyqstrat-evaluator-module"></span><h2>pyqstrat.evaluator module<a class="headerlink" href="#module-pyqstrat.evaluator" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.evaluator.Evaluator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">Evaluator</code><span class="sig-paren">(</span><em class="sig-param">initial_metrics</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>You add functions to the evaluator that are dependent on the outputs of other functions.
The evaluator will call these functions in the right order
so dependencies are computed first before the functions that need their output.
You can retrieve the output of a metric using the metric member function</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span> <span class="o">=</span> <span class="n">Evaluator</span><span class="p">(</span><span class="n">initial_metrics</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">add_metric</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="go">array([ 9, 10, 11])</span>
</pre></div>
</div>
<dl class="method">
<dt id="pyqstrat.evaluator.Evaluator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">initial_metrics</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Inits Evaluator with a dictionary of initial metrics that are used to compute subsequent metrics</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>initial_metrics</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – a dictionary of string name -&gt; metric.  metric can be any object including a scalar,
an array or a tuple</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.evaluator.Evaluator.add_metric">
<code class="sig-name descname">add_metric</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">func</em>, <em class="sig-param">dependencies</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.add_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.add_metric" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.evaluator.Evaluator.compute">
<code class="sig-name descname">compute</code><span class="sig-paren">(</span><em class="sig-param">metric_names=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute metrics using the internal dependency graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>metric_names</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – an array of metric names.  If not passed in, evaluator will compute and store all metrics</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.evaluator.Evaluator.compute_metric">
<code class="sig-name descname">compute_metric</code><span class="sig-paren">(</span><em class="sig-param">metric_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.compute_metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.compute_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute and store a single metric:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>metric_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – string representing the metric to compute</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.evaluator.Evaluator.metric">
<code class="sig-name descname">metric</code><span class="sig-paren">(</span><em class="sig-param">metric_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value of a single metric given its name</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.evaluator.Evaluator.metrics">
<code class="sig-name descname">metrics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#Evaluator.metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.Evaluator.metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of metric name -&gt; metric value</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_amean">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_amean</code><span class="sig-paren">(</span><em class="sig-param">returns</em>, <em class="sig-param">periods_per_year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_amean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_amean" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes arithmetic mean of a return array, ignoring NaNs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>returns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Represents returns at any frequency</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Frequency of the returns, e.g. 252 for daily returns</p></li>
</ul>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compute_amean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.003</span><span class="p">,</span> <span class="mf">0.004</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span> <span class="mi">252</span><span class="p">)</span>
<span class="go">0.882</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_annual_returns">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_annual_returns</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">returns</em>, <em class="sig-param">periods_per_year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_annual_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_annual_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the output of compute_bucketed_returns and returns geometric mean of returns by year</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple with the first element being an array of years (integer) and the second element
an array of annualized returns for those years</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_bucketed_returns">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_bucketed_returns</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">returns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_bucketed_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_bucketed_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Bucket returns by year</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple with the first element being a list of years and the second a list of</dt><dd><p>numpy arrays containing returns for each corresponding year</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_calmar">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_calmar</code><span class="sig-paren">(</span><em class="sig-param">returns_3yr</em>, <em class="sig-param">periods_per_year</em>, <em class="sig-param">mdd_pct_3yr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_calmar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_calmar" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute Calmar ratio, which is the annualized return divided by max drawdown over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_dates_3yr">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_dates_3yr</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_dates_3yr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_dates_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an array of numpy datetimes, return those that are within 3 years of the last date in the array</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_equity">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_equity</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">starting_equity</em>, <em class="sig-param">returns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_equity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_equity" title="Permalink to this definition">¶</a></dt>
<dd><p>Given starting equity, timestamps and returns, create a numpy array of equity at each date</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_gmean">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_gmean</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">returns</em>, <em class="sig-param">periods_per_year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_gmean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_gmean" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute geometric mean of an array of returns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>returns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of returns, can contain nans</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Used for annualizing returns</p></li>
</ul>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">compute_gmean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-05-01&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[D]&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span> <span class="mf">0.003</span><span class="p">]),</span> <span class="mf">252.</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">0.018362</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_k_ratio">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_k_ratio</code><span class="sig-paren">(</span><em class="sig-param">equity</em>, <em class="sig-param">periods_per_year</em>, <em class="sig-param">halflife_years=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_k_ratio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_k_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute k-ratio (2013 or original versions by Lars Kestner). See <a class="reference external" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2230949">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2230949</a>
We also implement a modification that allows higher weighting for more recent returns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>equity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of the equity in your account</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – 252 for daily values</p></li>
<li><p><strong>halflife_years</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – If set, we use weighted linear regression to give less weight to older returns.
In this case, we compute the original k-ratio which does not use periods per year or number of observations
If not set, we compute the 2013 version of the k-ratio which weights k-ratio by sqrt(periods_per_year) / nobs</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>weighted or unweighted k-ratio</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span> <span class="o">=</span> <span class="mf">0.0025</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">equity</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">ret</span><span class="p">)</span><span class="o">.</span><span class="n">cumprod</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">compute_k_ratio</span><span class="p">(</span><span class="n">equity</span><span class="p">,</span> <span class="mi">252</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="mf">3.888</span><span class="p">,</span> <span class="n">abs_tol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="n">compute_k_ratio</span><span class="p">(</span><span class="n">equity</span><span class="p">,</span> <span class="mi">252</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="mf">602.140</span><span class="p">,</span> <span class="n">abs_tol</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_mar">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_mar</code><span class="sig-paren">(</span><em class="sig-param">returns</em>, <em class="sig-param">periods_per_year</em>, <em class="sig-param">mdd_pct</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_mar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_mar" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute MAR ratio, which is annualized return divided by biggest drawdown since inception.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_maxdd_date">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_maxdd_date</code><span class="sig-paren">(</span><em class="sig-param">rolling_dd_dates</em>, <em class="sig-param">rolling_dd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute date of max drawdown given numpy array of timestamps, and corresponding rolling dd percentages</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_maxdd_date_3yr">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_maxdd_date_3yr</code><span class="sig-paren">(</span><em class="sig-param">rolling_dd_3yr_timestamps</em>, <em class="sig-param">rolling_dd_3yr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_date_3yr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_date_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute max drawdown date over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_maxdd_pct">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_maxdd_pct</code><span class="sig-paren">(</span><em class="sig-param">rolling_dd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_pct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_pct" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute max drawdown percentage given a numpy array of rolling drawdowns, ignoring NaNs</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_maxdd_pct_3yr">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_maxdd_pct_3yr</code><span class="sig-paren">(</span><em class="sig-param">rolling_dd_3yr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_pct_3yr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_pct_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute max drawdown percentage over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_maxdd_start">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_maxdd_start</code><span class="sig-paren">(</span><em class="sig-param">rolling_dd_dates</em>, <em class="sig-param">rolling_dd</em>, <em class="sig-param">mdd_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute date when max drawdown starts, given numpy array of timestamps corresponding rolling dd
percentages and date of the max draw down</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_maxdd_start_3yr">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_maxdd_start_3yr</code><span class="sig-paren">(</span><em class="sig-param">rolling_dd_3yr_timestamps</em>, <em class="sig-param">rolling_dd_3yr</em>, <em class="sig-param">mdd_date_3yr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_maxdd_start_3yr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_maxdd_start_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Comput max drawdown start date over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_num_periods">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_num_periods</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">periods_per_year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_num_periods"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_num_periods" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Given an array of timestamps, we compute how many periods there are between the first and last element, where the length</dt><dd><p>of a period is defined by periods_per_year.  For example, if there are 6 periods per year,
then each period would be approx. 2 months long.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>np.ndarray of np.datetime64</em>) – a numpy array of returns, can contain nans</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – number of periods between first and last return</p></li>
</ul>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compute_num_periods</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-05-01&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[D]&#39;</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">2.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_periods_per_year">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_periods_per_year</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_periods_per_year"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_periods_per_year" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Computes trading periods per year for an array of numpy datetime64’s.</dt><dd><p>e.g. if most of the timestamps are separated by 1 day, will return 252.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of datetime64’s</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compute_periods_per_year</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[D]&#39;</span><span class="p">))</span>
<span class="go">252.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">compute_periods_per_year</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-01 10:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 10:05&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-01 10:10&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[m]&#39;</span><span class="p">)),</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">72576.05</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_return_metrics">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_return_metrics</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">rets</em>, <em class="sig-param">starting_equity</em>, <em class="sig-param">leading_non_finite_to_zeros=False</em>, <em class="sig-param">subsequent_non_finite_to_zeros=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_return_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_return_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a set of common metrics using returns (for example, of an instrument or a portfolio)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<em>np.array of datetime64</em>) – Timestamps for the returns</p></li>
<li><p><strong>rets</strong> (<em>nd.array of float</em>) – The returns, use 0.01 for 1%</p></li>
<li><p><strong>starting_equity</strong> (<em>float</em>) – Starting equity value in your portfolio</p></li>
<li><p><strong>leading_non_finite_to_zeros</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set, we replace leading nan, inf, -inf returns with zeros.
For example, you may need a warmup period for moving averages.  Default False</p></li>
<li><p><strong>subsequent_non_finite_to_zeros</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set, we replace any nans that follow the first non nan value with zeros.
There may be periods where you have no prices but removing these returns would result in incorrect annualization.
Default True</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#pyqstrat.evaluator.Evaluator" title="pyqstrat.evaluator.Evaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Evaluator</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An Evaluator object containing computed metrics off the returns passed in.
If needed, you can add your own metrics to this object based on the values of existing metrics and recompute the Evaluator.
Otherwise, you can just use the output of the evaluator using the metrics function.</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-05-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-09-01&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;M8[D]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.015</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">starting_equity</span> <span class="o">=</span> <span class="mf">1.e6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ev</span> <span class="o">=</span> <span class="n">compute_return_metrics</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">starting_equity</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metrics</span> <span class="o">=</span> <span class="n">ev</span><span class="o">.</span><span class="n">metrics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;gmean&#39;</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.021061</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;sharpe&#39;</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.599382</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="nb">all</span><span class="p">(</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;returns_3yr&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.015</span><span class="p">])))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_returns_3yr">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_returns_3yr</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">returns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_returns_3yr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_returns_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an array of numpy datetimes and an array of returns, return those that are within 3 years
of the last date in the datetime array</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_rolling_dd">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_rolling_dd</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">equity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_rolling_dd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_rolling_dd" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute numpy array of rolling drawdown percentage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – numpy array of datetime64</p></li>
<li><p><strong>equity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – numpy array of equity</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_rolling_dd_3yr">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_rolling_dd_3yr</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">equity</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_rolling_dd_3yr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_rolling_dd_3yr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute rolling drawdowns over the last 3 years</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_sharpe">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_sharpe</code><span class="sig-paren">(</span><em class="sig-param">returns</em>, <em class="sig-param">amean</em>, <em class="sig-param">periods_per_year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_sharpe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_sharpe" title="Permalink to this definition">¶</a></dt>
<dd><p>Note that this does not take into risk free returns so it’s really a sharpe0, i.e. assumes risk free returns are 0</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>returns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of returns</p></li>
<li><p><strong>amean</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – arithmetic mean of returns</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – number of trading periods per year</p></li>
</ul>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">compute_sharpe</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.001</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">]),</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mi">252</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
<span class="go">0.050508</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_sortino">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_sortino</code><span class="sig-paren">(</span><em class="sig-param">returns</em>, <em class="sig-param">amean</em>, <em class="sig-param">periods_per_year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_sortino"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_sortino" title="Permalink to this definition">¶</a></dt>
<dd><p>Note that this assumes target return is 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>returns</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – a numpy array of returns</p></li>
<li><p><strong>amean</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – arithmetic mean of returns</p></li>
<li><p><strong>periods_per_year</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – number of trading periods per year</p></li>
</ul>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">compute_sortino</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.001</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">]),</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mi">252</span><span class="p">),</span> <span class="mi">6</span><span class="p">))</span>
<span class="go">0.133631</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.compute_std">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">compute_std</code><span class="sig-paren">(</span><em class="sig-param">returns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#compute_std"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.compute_std" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes standard deviation of an array of returns, ignoring nans</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.display_return_metrics">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">display_return_metrics</code><span class="sig-paren">(</span><em class="sig-param">metrics</em>, <em class="sig-param">float_precision=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#display_return_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.display_return_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a dataframe making it convenient to view the output of the metrics obtained using the compute_return_metrics function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>float_precision</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Change if you want to display floats with more or less significant figures than the default,
3 significant figures.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A one row dataframe with formatted metrics.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.handle_non_finite_returns">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">handle_non_finite_returns</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">rets</em>, <em class="sig-param">leading_non_finite_to_zeros</em>, <em class="sig-param">subsequent_non_finite_to_zeros</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#handle_non_finite_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.handle_non_finite_returns" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">formatter</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{: .6g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2019-01-07&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handle_non_finite_returns</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">leading_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">subsequent_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">(array([&#39;2019-01-03&#39;, &#39;2019-01-04&#39;, &#39;2019-01-05&#39;, &#39;2019-01-06&#39;], dtype=&#39;datetime64[D]&#39;), array([ 3,  4,  0,  5]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handle_non_finite_returns</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">leading_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">subsequent_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">(array([&#39;2019-01-01&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;, &#39;2019-01-04&#39;, &#39;2019-01-06&#39;], dtype=&#39;datetime64[D]&#39;), array([ 0,  0,  3,  4,  5]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handle_non_finite_returns</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">leading_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">subsequent_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">(array([&#39;2019-01-01&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;, &#39;2019-01-04&#39;, &#39;2019-01-06&#39;], dtype=&#39;datetime64[D]&#39;), array([ 0,  0,  3,  4,  5]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span>  <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">handle_non_finite_returns</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">rets</span><span class="p">,</span> <span class="n">leading_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">subsequent_non_finite_to_zeros</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="go">(array([&#39;2019-01-01&#39;, &#39;2019-01-02&#39;, &#39;2019-01-03&#39;, &#39;2019-01-04&#39;, &#39;2019-01-05&#39;, &#39;2019-01-06&#39;],</span>
<span class="go">    dtype=&#39;datetime64[D]&#39;), array([ 1,  2,  3,  4,  4.5,  5]))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.plot_return_metrics">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">plot_return_metrics</code><span class="sig-paren">(</span><em class="sig-param">metrics</em>, <em class="sig-param">title=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#plot_return_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.plot_return_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot equity, rolling drawdowns and and a boxplot of annual returns given the output of compute_return_metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.evaluator.test_evaluator">
<code class="sig-prename descclassname">pyqstrat.evaluator.</code><code class="sig-name descname">test_evaluator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/evaluator.html#test_evaluator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.evaluator.test_evaluator" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.pyqstrat_cpp">
<span id="pyqstrat-pyqstrat-cpp-module"></span><h2>pyqstrat.pyqstrat_cpp module<a class="headerlink" href="#module-pyqstrat.pyqstrat_cpp" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.Aggregator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">Aggregator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.Aggregator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Aggregator.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.Aggregator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Aggregator.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.AllOpenInterestAggregator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">AllOpenInterestAggregator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllOpenInterestAggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Aggregator</span></code></a></p>
<p>Writes out all open interest records</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllOpenInterestAggregator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllOpenInterestAggregator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an open interest record to be written to disk at some point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>oi</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.OpenInterestRecord" title="pyqstrat.pyqstrat_cpp.OpenInterestRecord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OpenInterestRecord</span></code></a>) – </p></li>
<li><p><strong>line_number</strong> (<em>int</em>) – The line number of the source file that this trade came from.  Used for debugging</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllOpenInterestAggregator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllOpenInterestAggregator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>writer_creator</strong> – A function that takes a schema and returns an object
implementing the <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Writer" title="pyqstrat.pyqstrat_cpp.Writer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Writer</span></code></a> interface</p></li>
<li><p><strong>timestamp_unit</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Schema.Type" title="pyqstrat.pyqstrat_cpp.Schema.Type"><em>Schema.Type</em></a><em>, </em><em>optional</em>) – Whether timestamps are measured as milliseconds or microseconds since the unix epoch.
Defaults to Schema.TIMESTAMP_MILLI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.AllOtherAggregator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">AllOtherAggregator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllOtherAggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Aggregator</span></code></a></p>
<p>Writes out any records that are not trades, quotes or open interest</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllOtherAggregator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllOtherAggregator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a record to be written to disk at some point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.OtherRecord" title="pyqstrat.pyqstrat_cpp.OtherRecord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OtherRecord</span></code></a>) – </p></li>
<li><p><strong>line_number</strong> (<em>int</em>) – The line number of the source file that this trade came from.  Used for debugging</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllOtherAggregator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllOtherAggregator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>writer_creator</strong> – A function that takes a schema and returns an object
implementing the <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Writer" title="pyqstrat.pyqstrat_cpp.Writer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Writer</span></code></a> interface</p></li>
<li><p><strong>timestamp_unit</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Schema.Type" title="pyqstrat.pyqstrat_cpp.Schema.Type"><em>Schema.Type</em></a><em>, </em><em>optional</em>) – Whether timestamps are measured as milliseconds or microseconds since the unix epoch.
Defaults to Schema.TIMESTAMP_MILLI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.AllQuoteAggregator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">AllQuoteAggregator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllQuoteAggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Aggregator</span></code></a></p>
<p>Writes out every quote we see</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllQuoteAggregator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllQuoteAggregator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a quote record to be written to disk at some point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>quote</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.QuoteRecord" title="pyqstrat.pyqstrat_cpp.QuoteRecord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QuoteRecord</span></code></a>) – </p></li>
<li><p><strong>line_number</strong> (<em>int</em>) – The line number of the source file that this trade came from.  Used for debugging</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllQuoteAggregator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllQuoteAggregator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>writer_creator</strong> – A function that takes a schema and returns an object implementing the <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Writer" title="pyqstrat.pyqstrat_cpp.Writer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Writer</span></code></a> interface</p></li>
<li><p><strong>timestamp_unit</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Schema.Type" title="pyqstrat.pyqstrat_cpp.Schema.Type"><em>Schema.Type</em></a><em>, </em><em>optional</em>) – Whether timestamps are measured as milliseconds or microseconds since the unix epoch.
Defaults to Schema.TIMESTAMP_MILLI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.AllQuotePairAggregator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">AllQuotePairAggregator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllQuotePairAggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Aggregator</span></code></a></p>
<p>Writes out every quote pair we find</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllQuotePairAggregator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllQuotePairAggregator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a quote pair record to be written to disk at some point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>quote_pair</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.QuoteRecord" title="pyqstrat.pyqstrat_cpp.QuoteRecord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QuoteRecord</span></code></a>) – line_number (int): The line number of the source file that this trade came from.  Used for debugging</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllQuotePairAggregator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllQuotePairAggregator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>writer_creator</strong> – A function that takes a schema and returns an object
implementing the <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Writer" title="pyqstrat.pyqstrat_cpp.Writer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Writer</span></code></a> interface</p></li>
<li><p><strong>timestamp_unit</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Schema.Type" title="pyqstrat.pyqstrat_cpp.Schema.Type"><em>Schema.Type</em></a><em>, </em><em>optional</em>) – Whether timestamps are measured as milliseconds or microseconds since the unix epoch. Defaults to Schema.TIMESTAMP_MILLI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.AllTradeAggregator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">AllTradeAggregator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllTradeAggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Aggregator</span></code></a></p>
<p>Writes out every trade we see</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllTradeAggregator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllTradeAggregator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a trade record to be written to disk at some point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trade</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.TradeRecord" title="pyqstrat.pyqstrat_cpp.TradeRecord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TradeRecord</span></code></a>) – </p></li>
<li><p><strong>line_number</strong> (<em>int</em>) – The line number of the source file that this trade came from.  Used for debugging</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.AllTradeAggregator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.AllTradeAggregator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>writer_creator</strong> – A function that takes a schema and returns an object
implementing the <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Writer" title="pyqstrat.pyqstrat_cpp.Writer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Writer</span></code></a> interface</p></li>
<li><p><strong>timestamp_unit</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Schema.Type" title="pyqstrat.pyqstrat_cpp.Schema.Type"><em>Schema.Type</em></a><em>, </em><em>optional</em>) – Whether timestamps are measured as milliseconds or microseconds since the unix epoch.
Defaults to Schema.TIMESTAMP_MILLI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.BadLineHandler">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">BadLineHandler</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.BadLineHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.BadLineHandler.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.BadLineHandler.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.BadLineHandler.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.BadLineHandler.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.CheckFields">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">CheckFields</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.CheckFields" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.CheckFields.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.CheckFields.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.CheckFields.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.CheckFields.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.FileProcessor">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">FileProcessor</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FileProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.FileProcessor.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FileProcessor.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.FileProcessor.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FileProcessor.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.FixedWidthTimeParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">FixedWidthTimeParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FixedWidthTimeParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.TimestampParser" title="pyqstrat.pyqstrat_cpp.TimestampParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.TimestampParser</span></code></a></p>
<p>A helper class that takes a string formatted as HH:MM:SS.xxx and parses it into number of milliseconds or micros since the beginning of the day</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.FixedWidthTimeParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FixedWidthTimeParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time</strong> (<em>str</em>) – A string like “2018-01-01 08:35:22.132”</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Milliseconds or microseconds since Unix epoch</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.FixedWidthTimeParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FixedWidthTimeParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>micros</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to return timestamp in millisecs or microsecs since 1970.  Default false</p></li>
<li><p><strong>hours_start</strong> (<em>int</em><em>, </em><em>optional</em>) – index where the hour starts in the timestamp string.  Default -1</p></li>
<li><p><strong>hours_size</strong> (<em>int</em><em>, </em><em>optional</em>) – number of characters used for the hour</p></li>
<li><p><strong>minutes_start</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>minutes_size</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>seconds_start</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>seconds_size</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>millis_start</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>millis_size</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>micros_start</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>micros_size</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.FormatTimestampParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">FormatTimestampParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FormatTimestampParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.TimestampParser" title="pyqstrat.pyqstrat_cpp.TimestampParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.TimestampParser</span></code></a></p>
<dl class="simple">
<dt>Helper class that parses timestamps according to the strftime format string passed in.  strftime is slow so</dt><dd><p>use <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedWithTimeParser</span></code> if your timestamp has a fixed format such as “HH:MM:SS….”</p>
</dd>
</dl>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.FormatTimestampParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FormatTimestampParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time</strong> (<em>str</em>) – The timestamp to parse</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of millis or micros since epoch</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.FormatTimestampParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.FormatTimestampParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_date</strong> (<em>int</em>) – Sometimes the timestamps in a file contain time only and the name of a file contains the date.  In these cases, pass in the date
as number of millis or micros from the epoch to the start of that date.  If the timestamp has date also, pass in 0 here.</p></li>
<li><p><strong>time_format</strong> (<em>str</em><em>, </em><em>optional</em>) – strftime format string for parsing the timestamp.  Defaults to “%H:%M:%S”</p></li>
<li><p><strong>micros</strong> (<em>bool</em><em>, </em><em>optional</em>) – If this is set, we will parse and store microseconds.  Otherwise we will parse and store milliseconds.
Defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.HDF5WriterCreator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">HDF5WriterCreator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.HDF5WriterCreator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.WriterCreator" title="pyqstrat.pyqstrat_cpp.WriterCreator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.WriterCreator</span></code></a></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.HDF5WriterCreator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.HDF5WriterCreator.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.HDF5WriterCreator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.HDF5WriterCreator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_file_prefix</strong> (<em>str</em>) – Path of the output file to create.  The writer will add a ‘.hdf5’ to this path</p></li>
<li><p><strong>group_name_delimiter</strong> – A one character string.  We use this to delimit group names and create parent groups.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.HDF5WriterCreator.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.HDF5WriterCreator.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.IsFieldInList">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">IsFieldInList</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.IsFieldInList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.CheckFields" title="pyqstrat.pyqstrat_cpp.CheckFields"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.CheckFields</span></code></a></p>
<p>Simple utility class to check whether the value of fields[flag_idx] is in any of flag_values</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.IsFieldInList.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.IsFieldInList.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flag_values</strong> – a vector of strings containing possible values for the field</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.IsFieldInList.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.IsFieldInList.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> – a vector of strings</p></li>
<li><p><strong>flag_idx</strong> – the index of fields to check</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.LineFilter">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">LineFilter</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.LineFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.LineFilter.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.LineFilter.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.LineFilter.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.LineFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.MissingDataHandler">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">MissingDataHandler</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.MissingDataHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.MissingDataHandler.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.MissingDataHandler.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.MissingDataHandler.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.MissingDataHandler.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.OpenInterestRecord">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">OpenInterestRecord</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OpenInterestRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Record</span></code></a></p>
<p>Open interest for a future or option.  Usually one record per instrument at the beginning of the day</p>
<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.OpenInterestRecord.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OpenInterestRecord.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a symbol or instrument id, for example, for an option you may concantenate underlying symbol, expiration, strike,
put or call to uniquely identify the instrument</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.OpenInterestRecord.timestamp">
<code class="sig-name descname">timestamp</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OpenInterestRecord.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Trade time, in milliseconds or microseconds since 1/1/1970</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.OpenInterestRecord.qty">
<code class="sig-name descname">qty</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OpenInterestRecord.qty" title="Permalink to this definition">¶</a></dt>
<dd><p>Trade quantity</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.OpenInterestRecord.metadata">
<code class="sig-name descname">metadata</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OpenInterestRecord.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>A string representing any extra information you want to save, such as exchange, or special trade conditions</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.OpenInterestRecord.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OpenInterestRecord.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">id</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">metadata</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">qty</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">timestamp</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.OtherRecord">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">OtherRecord</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OtherRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Record</span></code></a></p>
<p>Any other data you want to store from market data besides trades, quotes and open interest.  You can capture any
important fields in the metadata attribute</p>
<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.OtherRecord.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OtherRecord.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a symbol or instrument id, for example, for an option you may concantenate underlying symbol, expiration, strike,
put or call to uniquely identify the instrument</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.OtherRecord.timestamp">
<code class="sig-name descname">timestamp</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OtherRecord.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>trade time, in milliseconds or microseconds since 1/1/1970</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.OtherRecord.metadata">
<code class="sig-name descname">metadata</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OtherRecord.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>a string representing any extra information you want to save, such as exchange, or special trade conditions</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.OtherRecord.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.OtherRecord.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">id</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">metadata</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">timestamp</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.PriceQtyMissingDataHandler">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">PriceQtyMissingDataHandler</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.PriceQtyMissingDataHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.MissingDataHandler" title="pyqstrat.pyqstrat_cpp.MissingDataHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.MissingDataHandler</span></code></a></p>
<p>A helper class that takes a Record as an input, checks whether its a trade or a quote or any open interest record, and if any of
the prices or quantities are 0, sets them to NAN</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.PriceQtyMissingDataHandler.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.PriceQtyMissingDataHandler.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>record</strong> – Any subclass of <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Record</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.PriceQtyMissingDataHandler.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.PriceQtyMissingDataHandler.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.PrintBadLineHandler">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">PrintBadLineHandler</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.PrintBadLineHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.BadLineHandler" title="pyqstrat.pyqstrat_cpp.BadLineHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.BadLineHandler</span></code></a></p>
<p>A helper class that takes in lines we cannot parse and either prints them and continues or raises an Exception</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.PrintBadLineHandler.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.PrintBadLineHandler.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>line_number</strong> (<em>int</em>) – Line number of the input file that corresponds to this line (for debugging)</p></li>
<li><p><strong>line</strong> (<em>str</em>) – The actual line that failed to parse</p></li>
<li><p><strong>exception</strong> (<em>Exception</em>) – The exception that caused us to fail to parse this line.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.PrintBadLineHandler.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.PrintBadLineHandler.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>raise</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to raise an exception every time this is called or just print debugging info.  Defaults to False</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.QuoteRecord">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">QuoteRecord</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Record</span></code></a></p>
<p>A parsed quote record that we can save to disk</p>
<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.QuoteRecord.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteRecord.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a symbol or instrument id, for example, for an option you may concantenate underlying symbol, expiration, strike,
put or call to uniquely identify the instrument</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.QuoteRecord.timestamp">
<code class="sig-name descname">timestamp</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteRecord.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Trade time, in milliseconds or microseconds since 1/1/1970</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.QuoteRecord.bid">
<code class="sig-name descname">bid</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteRecord.bid" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, this is a bid quote, otherwise it is an offer</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.QuoteRecord.qty">
<code class="sig-name descname">qty</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteRecord.qty" title="Permalink to this definition">¶</a></dt>
<dd><p>Trade quantity</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.QuoteRecord.price">
<code class="sig-name descname">price</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteRecord.price" title="Permalink to this definition">¶</a></dt>
<dd><p>Trade price</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.QuoteRecord.metadata">
<code class="sig-name descname">metadata</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteRecord.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>A string representing any extra information you want to save, such as exchange, or special trade conditions</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.QuoteRecord.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteRecord.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">bid</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">id</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">metadata</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">price</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">qty</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">timestamp</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.QuoteTOBAggregator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">QuoteTOBAggregator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteTOBAggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Aggregator</span></code></a></p>
<p>Aggregate top of book quotes to top of book records.  If you specify a frequency such as “5m”, we will calculate a record
every 5 minutes which has the top of book at the end of that bar.  If no frequency is specified, we will create a top of book
every time a quote comes in.  We assume that the quotes are all top of book quotes and are written in pairs so we have a bid quote
followed by a offer quote with the same timestamp or vice versa</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.QuoteTOBAggregator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteTOBAggregator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a quote record to be written to disk at some point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>quote</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.QuoteRecord" title="pyqstrat.pyqstrat_cpp.QuoteRecord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QuoteRecord</span></code></a>) – </p></li>
<li><p><strong>line_number</strong> (<em>int</em>) – The line number of the source file that this trade came from.  Used for debugging</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.QuoteTOBAggregator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteTOBAggregator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>writer_creator</strong> – A function that takes a schema and returns an object implementing the <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Writer" title="pyqstrat.pyqstrat_cpp.Writer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Writer</span></code></a> interface</p></li>
<li><p><strong>frequency</strong> (<em>str</em><em>, </em><em>optional</em>) – A string like “5m” indicating the bar size is 5 mins.  Units can be s,m,h or d for second, minute, hour or day.
Defaults to “5m”.  If you set this to “”, each tick will be recorded.</p></li>
<li><p><strong>timestamp_unit</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Schema.Type" title="pyqstrat.pyqstrat_cpp.Schema.Type"><em>Schema.Type</em></a><em>, </em><em>optional</em>) – Whether timestamps are measured as milliseconds or microseconds since the unix epoch.
Defaults to Schema.TIMESTAMP_MILLI</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.QuoteTOBAggregator.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.QuoteTOBAggregator.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all unwritten records to the Writer, which writes them to disk when its close function is called</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.Record">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">Record</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Record" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.Record.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Record.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.RecordFieldParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">RecordFieldParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordFieldParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordFieldParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordFieldParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordFieldParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordFieldParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.RecordFilter">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">RecordFilter</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordFilter.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordFilter.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordFilter.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.RecordGenerator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">RecordGenerator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordGenerator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordGenerator.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordGenerator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordGenerator.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.RecordParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">RecordParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordParser.add_line">
<code class="sig-name descname">add_line</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordParser.add_line" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – The line we need to parse</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RecordParser.parse">
<code class="sig-name descname">parse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RecordParser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Return: a subclass of <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Record</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.RegExLineFilter">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">RegExLineFilter</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RegExLineFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.LineFilter" title="pyqstrat.pyqstrat_cpp.LineFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.LineFilter</span></code></a></p>
<p>A helper class that filters lines from the input file based on a regular expression.  Note that regular expressions are slow, so
if you just need to match specific strings, use a string matching filter instead.</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RegExLineFilter.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RegExLineFilter.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – The string that the regular expression should match.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the regex matched</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.RegExLineFilter.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.RegExLineFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> (<em>str</em>) – The regex pattern to match.  This follows C++ std::regex pattern matching rules as opposed to python</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.Schema">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">Schema</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<p>Describes a list of field names and data types for writing records to disk</p>
<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.types">
<code class="sig-name descname">types</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.types" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of (str, type) tuples describing a record with the name of each field and its datatype</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.BOOL">
<code class="sig-name descname">BOOL</code><em class="property"> = Type.BOOL</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.BOOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.FLOAT32">
<code class="sig-name descname">FLOAT32</code><em class="property"> = Type.FLOAT32</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.FLOAT32" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.FLOAT64">
<code class="sig-name descname">FLOAT64</code><em class="property"> = Type.FLOAT64</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.FLOAT64" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.INT32">
<code class="sig-name descname">INT32</code><em class="property"> = Type.INT32</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.INT32" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.INT64">
<code class="sig-name descname">INT64</code><em class="property"> = Type.INT64</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.INT64" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.STRING">
<code class="sig-name descname">STRING</code><em class="property"> = Type.STRING</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.STRING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.TIMESTAMP_MICRO">
<code class="sig-name descname">TIMESTAMP_MICRO</code><em class="property"> = Type.TIMESTAMP_MICRO</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.TIMESTAMP_MICRO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.TIMESTAMP_MILLI">
<code class="sig-name descname">TIMESTAMP_MILLI</code><em class="property"> = Type.TIMESTAMP_MILLI</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.TIMESTAMP_MILLI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type">
<em class="property">class </em><code class="sig-name descname">Type</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<p>Members:</p>
<p>BOOL</p>
<p>INT32</p>
<p>INT64</p>
<p>FLOAT32</p>
<p>FLOAT64</p>
<p>STRING</p>
<p>TIMESTAMP_MILLI</p>
<p>TIMESTAMP_MICRO</p>
<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.BOOL">
<code class="sig-name descname">BOOL</code><em class="property"> = Type.BOOL</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.BOOL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.FLOAT32">
<code class="sig-name descname">FLOAT32</code><em class="property"> = Type.FLOAT32</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.FLOAT32" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.FLOAT64">
<code class="sig-name descname">FLOAT64</code><em class="property"> = Type.FLOAT64</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.FLOAT64" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.INT32">
<code class="sig-name descname">INT32</code><em class="property"> = Type.INT32</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.INT32" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.INT64">
<code class="sig-name descname">INT64</code><em class="property"> = Type.INT64</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.INT64" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.STRING">
<code class="sig-name descname">STRING</code><em class="property"> = Type.STRING</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.STRING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.TIMESTAMP_MICRO">
<code class="sig-name descname">TIMESTAMP_MICRO</code><em class="property"> = Type.TIMESTAMP_MICRO</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.TIMESTAMP_MICRO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.TIMESTAMP_MILLI">
<code class="sig-name descname">TIMESTAMP_MILLI</code><em class="property"> = Type.TIMESTAMP_MILLI</em><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.TIMESTAMP_MILLI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.Schema.Type.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.Type.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.Schema.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Schema.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">types</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.SubStringLineFilter">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">SubStringLineFilter</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.SubStringLineFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.LineFilter" title="pyqstrat.pyqstrat_cpp.LineFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.LineFilter</span></code></a></p>
<p>A helper class that will check if a line matches any of a set of strings</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.SubStringLineFilter.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.SubStringLineFilter.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em>) – We check if any of the patterns are present in this string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether any of the patterns were present</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.SubStringLineFilter.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.SubStringLineFilter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>patterns</strong> (<em>list of str</em>) – The list of strings to match against</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TextFileDecompressor">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TextFileDecompressor</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextFileDecompressor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.RecordGenerator" title="pyqstrat.pyqstrat_cpp.RecordGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.RecordGenerator</span></code></a></p>
<p>A helper function that takes a filename and its compression type, and returns a function that we can use to iterate over lines in that file</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextFileDecompressor.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextFileDecompressor.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The file to read</p></li>
<li><p><strong>compression</strong> (<em>str</em>) – One of “” for uncompressed files, “gzip”, “bz2” or “lzip”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A function that takes an empty string as input, and fills in that string.  The function should return False EOF has been reached, True otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextFileDecompressor.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextFileDecompressor.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TextFileProcessor">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TextFileProcessor</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextFileProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.FileProcessor" title="pyqstrat.pyqstrat_cpp.FileProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.FileProcessor</span></code></a></p>
<p>A helper class that takes text based market data files and creates parsed and aggregated quote, trade, open interest, and other files from them.</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextFileProcessor.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextFileProcessor.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_filename</strong> (<em>str</em>) – The file to read</p></li>
<li><p><strong>compression</strong> (<em>str</em>) – One of “” for uncompressed files, “gzip”, “bz2” or “lzip”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of lines processed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextFileProcessor.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextFileProcessor.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record_generator</strong> – A function that takes a filename and its compression type, and returns a function that we
can use to iterate over lines in that file</p></li>
<li><p><strong>line_filter</strong> – A function that takes a line (str) as input and returns whether we should parse it or discard it</p></li>
<li><p><strong>record_parser</strong> – A function that takes a line (str) as input and returns a <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Record</span></code></a> object</p></li>
<li><p><strong>bad_line_handler</strong> – A function that takes a line that failed to parse and returns a <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Record</span></code></a> object or None</p></li>
<li><p><strong>record_filter</strong> – A function that takes a parsed Record object and returns whether we should keep it or discard it</p></li>
<li><p><strong>missing_data_handler</strong> – A function that takes a parsed Record object and deals with missing data, for example, by converting 0’s to NANs</p></li>
<li><p><strong>aggregators</strong> – A vector of functions that each take a parsed Record object and aggregate it.</p></li>
<li><p><strong>skip_rows</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of rows to skip in the file before starting to read it.  Defaults to 1 to ignore a header line</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TextOpenInterestParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TextOpenInterestParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextOpenInterestParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.RecordFieldParser" title="pyqstrat.pyqstrat_cpp.RecordFieldParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.RecordFieldParser</span></code></a></p>
<p>Helper class that parses an open interest record from a list of fields (strings)</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextOpenInterestParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextOpenInterestParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fields</strong> (<em>list of str</em>) – A list of fields representing the record</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>or None if this record is not an open interest record</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.pyqstrat_cpp.OpenInterestRecord" title="pyqstrat.pyqstrat_cpp.OpenInterestRecord">OpenInterestRecord</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextOpenInterestParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextOpenInterestParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_open_interest</strong> – A function that takes a list of strings as input and returns a bool if the fields represent an open interest record</p></li>
<li><p><strong>base_date</strong> (<em>int</em>) – If the timestamp in the files does not have a date component, pass in the date as number of millis or micros since the epoch</p></li>
<li><p><strong>timestamp_indices</strong> (<em>list of int</em>) – Index of the timestamp fields within the record.  For example, date and time could be in different fields.
We add the result of each timestamp field to get the final timestamp</p></li>
<li><p><strong>qty_idx</strong> (<em>int</em>) – Index of the quote size field</p></li>
<li><p><strong>id_field_indices</strong> (<em>list of str</em>) – Indices of the fields identifying an instrument.  For example, for a future this could be symbol and expiry.
These fields will be concatenated with a separator and placed in the id field in the record</p></li>
<li><p><strong>meta_field_indices</strong> (<em>list of str</em>) – Indices of additional fields you want to store.  For example, the exchange.</p></li>
<li><p><strong>timestamp_parsers</strong> – A list of function that takes a timestamp as a string and returns number of millis or micros since the epoch</p></li>
<li><p><strong>strip_id</strong> (<em>bool</em><em>, </em><em>optional</em>) – If we want to strip any whitespace from the id fields before concatenating them.  Defaults to True</p></li>
<li><p><strong>strip_meta</strong> (<em>bool</em><em>, </em><em>optional</em>) – If we want to strip any whitespace from the meta fields before concatenating them.  Defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TextOtherParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TextOtherParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextOtherParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.RecordFieldParser" title="pyqstrat.pyqstrat_cpp.RecordFieldParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.RecordFieldParser</span></code></a></p>
<p>Helper class that parses a record that contains information other than a quote, trade or open interest record</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextOtherParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextOtherParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fields</strong> (<em>list of str</em>) – a list of fields representing the record</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.pyqstrat_cpp.OtherRecord" title="pyqstrat.pyqstrat_cpp.OtherRecord">OtherRecord</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextOtherParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextOtherParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_other</strong> – A function that takes a list of strings as input and returns a bool if we want to parse this record</p></li>
<li><p><strong>base_date</strong> (<em>int</em>) – If the timestamp in the files does not have a date component, pass in the date as number of millis or micros since the epoch</p></li>
<li><p><strong>timestamp_indices</strong> (<em>list of int</em>) – Index of the timestamp fields within the record.  For example, date and time could be in different fields.
We add the result of each timestamp field to get the final timestamp</p></li>
<li><p><strong>id_field_indices</strong> (<em>list of str</em>) – Indices of the fields identifying an instrument.  For example, for a future this could be symbol and expiry.
These fields will be concatenated with a separator and placed in the id field in the record</p></li>
<li><p><strong>meta_field_indices</strong> (<em>list of str</em>) – Indices of additional fields you want to store.  For example, the exchange.</p></li>
<li><p><strong>timestamp_parsers</strong> – A list of functions that take a timestamp as a string and returns number of millis or micros since the epoch</p></li>
<li><p><strong>strip_id</strong> (<em>bool</em><em>, </em><em>optional</em>) – If we want to strip any whitespace from the id fields before concatenating them.  Defaults to True</p></li>
<li><p><strong>strip_meta</strong> (<em>bool</em><em>, </em><em>optional</em>) – If we want to strip any whitespace from the meta fields before concatenating them.  Defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TextQuotePairParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TextQuotePairParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextQuotePairParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.RecordFieldParser" title="pyqstrat.pyqstrat_cpp.RecordFieldParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.RecordFieldParser</span></code></a></p>
<p>Helper class that parses a quote containing bid / ask in the same record from a list of fields (strings)</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextQuotePairParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextQuotePairParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> (<em>list of str</em>) – A list of fields representing the record</p></li>
<li><p><strong>Returns</strong> – </p></li>
<li><p><strong>QuotePairRecord</strong> – Or None if this field is not a quote pair</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextQuotePairParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextQuotePairParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_quote_pair</strong> – a function that takes a list of strings as input and returns a bool if the fields represent a quote pair</p></li>
<li><p><strong>base_date</strong> (<em>int</em>) – if the timestamp in the files does not have a date component, pass in the date as number of millis or micros since the epoch</p></li>
<li><p><strong>timestamp_indices</strong> (<em>list of int</em>) – Index of the timestamp fields within the record.  For example, date and time could be in different fields.
We add the result of each timestamp field to get the final timestamp</p></li>
<li><p><strong>bid_price_idx</strong> (<em>int</em>) – index of the field that contains the bid price</p></li>
<li><p><strong>bid_qty_idx</strong> (<em>int</em>) – index of the field that contains the bid quantity</p></li>
<li><p><strong>ask_price_idx</strong> (<em>int</em>) – index of the field that contains the ask price</p></li>
<li><p><strong>ask_qty_idx</strong> (<em>int</em>) – index of the field that contains the ask quantity</p></li>
<li><p><strong>id_field_indices</strong> (<em>list of str</em>) – indices of the fields identifying an instrument.  For example, for a future this could be symbol and expiry. These fields will be concatenated with a separator and placed in the id field in the record.</p></li>
<li><p><strong>meta_field_indices</strong> (<em>list of str</em>) – indices of additional fields you want to store.  For example, the exchange.</p></li>
<li><p><strong>timestamp_parsers</strong> – a list of functions that takes a timestamp as a string and returns number of millis or micros since the epoch</p></li>
<li><p><strong>price_multiplier</strong> – (float, optional): sometimes the price in a file could be in hundredths of cents, and we divide by this to get dollars. Defaults to 1.0</p></li>
<li><p><strong>strip_id</strong> (<em>bool</em><em>, </em><em>optional</em>) – if we want to strip any whitespace from the id fields before concatenating them.  Defaults to True</p></li>
<li><p><strong>strip_meta</strong> (<em>bool</em><em>, </em><em>optional</em>) – if we want to strip any whitespace from the meta fields before concatenating them.  Defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TextQuoteParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TextQuoteParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextQuoteParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.RecordFieldParser" title="pyqstrat.pyqstrat_cpp.RecordFieldParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.RecordFieldParser</span></code></a></p>
<p>Helper class that parses a quote from a list of fields (strings)</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextQuoteParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextQuoteParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fields</strong> (<em>list of str</em>) – A list of fields representing the record</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Or None if this field is not a quote</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.pyqstrat_cpp.QuoteRecord" title="pyqstrat.pyqstrat_cpp.QuoteRecord">QuoteRecord</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextQuoteParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextQuoteParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_quote</strong> – a function that takes a list of strings as input and returns a bool if the fields represent a quote</p></li>
<li><p><strong>base_date</strong> (<em>int</em>) – if the timestamp in the files does not have a date component, pass in the date as number of millis or micros since the epoch</p></li>
<li><p><strong>timestamp_indices</strong> (<em>list of int</em>) – index of the timestamp field within the record</p></li>
<li><p><strong>bid_offer_idx</strong> (<em>int</em>) – index of the field that contains whether this is a bid or offer quote</p></li>
<li><p><strong>price_idx</strong> (<em>int</em>) – index of the price field</p></li>
<li><p><strong>qty_idx</strong> (<em>int</em>) – index of the quote size field</p></li>
<li><p><strong>id_field_indices</strong> (<em>list of str</em>) – indices of the fields identifying an instrument.  For example, for a future this could be symbol and expiry.
These fields will be concatenated with a separator and placed in the id field in the record</p></li>
<li><p><strong>meta_field_indices</strong> (<em>list of str</em>) – indices of additional fields you want to store.  For example, the exchange.</p></li>
<li><p><strong>timestamp_parsers</strong> – a vector of functions that take a timestamp as a string and returns number of millis or micros since the epoch</p></li>
<li><p><strong>bid_str</strong> (<em>str</em>) – if the field indicated in bid_offer_idx matches this string, we consider this quote to be a bid</p></li>
<li><p><strong>offer_str</strong> (<em>str</em>) – if the field indicated in bid_offer_idx matches this string, we consider this quote to be an offer</p></li>
<li><p><strong>price_multiplier</strong> – (float, optional): sometimes the price in a file could be in hundredths of cents, and we divide by this to get dollars.
Defaults to 1.0</p></li>
<li><p><strong>strip_id</strong> (<em>bool</em><em>, </em><em>optional</em>) – if we want to strip any whitespace from the id fields before concatenating them.  Defaults to True</p></li>
<li><p><strong>strip_meta</strong> (<em>bool</em><em>, </em><em>optional</em>) – if we want to strip any whitespace from the meta fields before concatenating them.  Defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TextRecordParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TextRecordParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextRecordParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.RecordParser" title="pyqstrat.pyqstrat_cpp.RecordParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.RecordParser</span></code></a></p>
<p>A helper class that takes in a text line, separates it into a list of fields based on a delimiter, and then uess the parsers
passed in to try and parse the line as a quote, trade, open interest record or any other type of record</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextRecordParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextRecordParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parsers</strong> – A vector of functions that each take a list of strings as input and returns a subclass of <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Record</span></code></a> or None</p></li>
<li><p><strong>exclusive</strong> (<em>bool</em><em>, </em><em>optional</em>) – Set this when each line can only contain one type of record, after one first parser returns a non
None object, we will not call other parsers.  Default false</p></li>
<li><p><strong>separator</strong> (<em>str</em><em>, </em><em>optional</em>) – A single character string.  This is the delimiter we use to separate fields from the text passed in.
Default ,</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TextTradeParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TextTradeParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextTradeParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.RecordFieldParser" title="pyqstrat.pyqstrat_cpp.RecordFieldParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.RecordFieldParser</span></code></a></p>
<p>Helper class that parses a trade from a list of fields (strings)</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextTradeParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextTradeParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fields</strong> (<em>list of str</em>) – A list of fields representing the record</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>or None if this record is not a trade</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#pyqstrat.pyqstrat_cpp.TradeRecord" title="pyqstrat.pyqstrat_cpp.TradeRecord">TradeRecord</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TextTradeParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TextTradeParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>is_trade</strong> – A function that takes a list of strings as input and returns a bool if the fields represent a trade</p></li>
<li><p><strong>base_date</strong> (<em>int</em>) – If the timestamp in the files does not have a date component, pass in the date as number of millis or micros since the epoch</p></li>
<li><p><strong>timestamp_indices</strong> (<em>list of int</em>) – Index of the timestamp fields within the record.  For example, date and time could be in different fields.
We add the result of each timestamp field to get the final timestamp</p></li>
<li><p><strong>price_idx</strong> (<em>int</em>) – Index of the price field</p></li>
<li><p><strong>qty_idx</strong> (<em>int</em>) – Index of the quote size field</p></li>
<li><p><strong>id_field_indices</strong> (<em>list of str</em>) – Indices of the fields identifying an instrument.  For example, for a future this could be symbol and expiry.
These fields will be concatenated with a separator and placed in the id field in the record</p></li>
<li><p><strong>meta_field_indices</strong> (<em>list of str</em>) – Indices of additional fields you want to store.  For example, the exchange.</p></li>
<li><p><strong>timestamp_parsers</strong> – A list of functions that takes a timestamp as a string and returns number of millis or micros since the epoch</p></li>
<li><p><strong>price_multiplier</strong> – (float, optional): Sometimes the price in a file could be in hundredths of cents, and we divide by this to get dollars.
Defaults to 1.0</p></li>
<li><p><strong>strip_id</strong> (<em>bool</em><em>, </em><em>optional</em>) – If we want to strip any whitespace from the id fields before concatenating them.  Defaults to True</p></li>
<li><p><strong>strip_meta</strong> (<em>bool</em><em>, </em><em>optional</em>) – If we want to strip any whitespace from the meta fields before concatenating them.  Defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TimestampParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TimestampParser</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TimestampParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TimestampParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TimestampParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TimestampParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TimestampParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TradeBarAggregator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TradeBarAggregator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeBarAggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Aggregator</span></code></a></p>
<dl class="simple">
<dt>Aggregate trade records to create trade bars, given a frequency.  Calculates open, high, low, close, volume, vwap as well as last_update_time</dt><dd><p>which is timestamp of the last trade that we processed before the bar ended.</p>
</dd>
</dl>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TradeBarAggregator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeBarAggregator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a trade record to be written to disk at some point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trade</strong> (<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.TradeRecord" title="pyqstrat.pyqstrat_cpp.TradeRecord"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TradeRecord</span></code></a>) – </p></li>
<li><p><strong>line_number</strong> (<em>int</em>) – The line number of the source file that this trade came from.  Used for debugging</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TradeBarAggregator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeBarAggregator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>writer_creator</strong> – A function that takes a schema and returns an object
implementing the <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Writer" title="pyqstrat.pyqstrat_cpp.Writer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Writer</span></code></a> interface</p></li>
<li><p><strong>frequency</strong> – A string like “5m” indicating the bar size is 5 mins.  Units can be s,m,h or d for second, minute, hour or day.
Defaults to “5m”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TradeBarAggregator.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeBarAggregator.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush all unwritten records to the Writer, which writes them to disk when its close function is called</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.TradeRecord">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">TradeRecord</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.Record</span></code></a></p>
<p>A parsed trade record that we can save to disk</p>
<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.TradeRecord.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeRecord.id" title="Permalink to this definition">¶</a></dt>
<dd><p>A unique string representing a symbol or instrument id</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.TradeRecord.timestamp">
<code class="sig-name descname">timestamp</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeRecord.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Trade time, in milliseconds or microseconds since 1/1/1970</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.TradeRecord.qty">
<code class="sig-name descname">qty</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeRecord.qty" title="Permalink to this definition">¶</a></dt>
<dd><p>Trade quantity</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.TradeRecord.price">
<code class="sig-name descname">price</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeRecord.price" title="Permalink to this definition">¶</a></dt>
<dd><p>Trade price</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.pyqstrat_cpp.TradeRecord.metadata">
<code class="sig-name descname">metadata</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeRecord.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>a string representing any extra information you want to save, such as exchange, or special trade conditions</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.TradeRecord.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.TradeRecord.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">id</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">metadata</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">price</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">qty</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">timestamp</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.Writer">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">Writer</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Writer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<p>An abstract class that you subclass to provide an object that can write to disk</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.Writer.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Writer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.Writer.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.Writer.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the writer and flush any remaining data to disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>success</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set to False, we had some kind of exception and are cleaning up.  Tells the function to
not indicate the file was written successfully, for example by renaming a temp file to the actual filename.  Defaults to True</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.WriterCreator">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">WriterCreator</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.WriterCreator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.WriterCreator.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.WriterCreator.__call__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.WriterCreator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.WriterCreator.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.ZipFileReader">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">ZipFileReader</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.ZipFileReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.RecordGenerator" title="pyqstrat.pyqstrat_cpp.RecordGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyqstrat.pyqstrat_cpp.RecordGenerator</span></code></a></p>
<p>A helper function that takes the name of a zip file and returns a function that we can use to iterate over lines in that file</p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.ZipFileReader.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.ZipFileReader.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – The file to read</p></li>
<li><p><strong>compression</strong> (<em>str</em>) – Ignored</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A function that takes an empty string as input, and fills in that string.  The function should return False EOF has been reached, True otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.ZipFileReader.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.ZipFileReader.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>archive_to_filenames</strong> (<em>dict of list</em><em>(</em><em>str</em><em>)</em>) – zip archive file name to list of files to read within that archive</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.black_scholes_price">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">black_scholes_price</code><span class="sig-paren">(</span><em class="sig-param">call: numpy.ndarray[bool], S: numpy.ndarray[float64], K: numpy.ndarray[float64], t: numpy.ndarray[float64], r: numpy.ndarray[float64], sigma: numpy.ndarray[float64], q: numpy.ndarray[float64] = 0.0</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.black_scholes_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute Euroepean option price
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option price</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.cdf">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">cdf</code><span class="sig-paren">(</span><em class="sig-param">x: numpy.ndarray[float64]</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.cdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Cumulative density function of normal distribution
:param x: random variable
:type x: float</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cdf of the random variable</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.d1">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">d1</code><span class="sig-paren">(</span><em class="sig-param">S: numpy.ndarray[float64], K: numpy.ndarray[float64], t: numpy.ndarray[float64], r: numpy.ndarray[float64], sigma: numpy.ndarray[float64], q: numpy.ndarray[float64] = 0.0</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.d1" title="Permalink to this definition">¶</a></dt>
<dd><p>d1 from Black Scholes
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%
:type q: float</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.d2">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">d2</code><span class="sig-paren">(</span><em class="sig-param">S: numpy.ndarray[float64], K: numpy.ndarray[float64], t: numpy.ndarray[float64], r: numpy.ndarray[float64], sigma: numpy.ndarray[float64], q: numpy.ndarray[float64] = 0.0</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.d2" title="Permalink to this definition">¶</a></dt>
<dd><p>d2 from Black Scholes
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%
:type q: float</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.delta">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">delta</code><span class="sig-paren">(</span><em class="sig-param">call: numpy.ndarray[bool], S: numpy.ndarray[float64], K: numpy.ndarray[float64], t: numpy.ndarray[float64], r: numpy.ndarray[float64], sigma: numpy.ndarray[float64], q: numpy.ndarray[float64] = 0.0</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option delta
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option delta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.gamma">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">gamma</code><span class="sig-paren">(</span><em class="sig-param">S: numpy.ndarray[float64], K: numpy.ndarray[float64], t: numpy.ndarray[float64], r: numpy.ndarray[float64], sigma: numpy.ndarray[float64], q: numpy.ndarray[float64] = 0.0</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.gamma" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option gamma.
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option gamma</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.implied_vol">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">implied_vol</code><span class="sig-paren">(</span><em class="sig-param">call: numpy.ndarray[bool], price: numpy.ndarray[float64], S: numpy.ndarray[float64], K: numpy.ndarray[float64], t: numpy.ndarray[float64], r: numpy.ndarray[float64], q: numpy.ndarray[float64] = 0.0</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.implied_vol" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute implied volatility for a European option.
:param call: True for a call option, False for a put
:type call: bool
:param price: The option premium
:type price: float
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Implied volatility.  For 1% we return 0.01</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="pyqstrat.pyqstrat_cpp.ostream_redirect">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">ostream_redirect</code><a class="headerlink" href="#pyqstrat.pyqstrat_cpp.ostream_redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pybind11_builtins.pybind11_object</span></code></p>
<dl class="method">
<dt id="pyqstrat.pyqstrat_cpp.ostream_redirect.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self: pyqstrat.pyqstrat_cpp.ostream_redirect</em>, <em class="sig-param">stdout: bool = True</em>, <em class="sig-param">stderr: bool = True</em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.ostream_redirect.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.rho">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">rho</code><span class="sig-paren">(</span><em class="sig-param">call: numpy.ndarray[bool], S: numpy.ndarray[float64], K: numpy.ndarray[float64], t: numpy.ndarray[float64], r: numpy.ndarray[float64], sigma: numpy.ndarray[float64], q: numpy.ndarray[float64] = 0.0</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.rho" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option rho.  This is Black Scholes formula rho divided by 100 so we get rho per 1% change in interest rate
:param call: True for a European call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option theta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.theta">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">theta</code><span class="sig-paren">(</span><em class="sig-param">call: numpy.ndarray[bool], F: numpy.ndarray[float64], K: numpy.ndarray[float64], t: numpy.ndarray[float64], r: numpy.ndarray[float64], sigma: numpy.ndarray[float64], q: numpy.ndarray[float64] = 0.0</em><span class="sig-paren">)</span> &#x2192; object<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.theta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option theta per day.  This is Black Scholes formula theta divided by 365 to give us the customary theta per day
:param call: True for a call option, False for a put
:type call: bool
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option theta</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.pyqstrat_cpp.vega">
<code class="sig-prename descclassname">pyqstrat.pyqstrat_cpp.</code><code class="sig-name descname">vega</code><span class="sig-paren">(</span><em class="sig-param">S: float</em>, <em class="sig-param">K: float</em>, <em class="sig-param">t: float</em>, <em class="sig-param">r: float</em>, <em class="sig-param">sigma: float</em>, <em class="sig-param">q: float = 0.0</em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#pyqstrat.pyqstrat_cpp.vega" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute European option vega.  This is Black Scholes formula vega divided by 100 so we get rho per 1% change in interest rate
:param S: Spot price. For a future discount the future price using exp(-rt)
:type S: float
:param K: Strike
:type K: float
:param t: Time to maturity in years
:type t: float
:param r: Continuously compounded interest rate.  Use 0.01 for 1%
:type r: float
:param sigma: Annualized volatility.  Use 0.01 for 1%
:type sigma: float
:param q: Annualized dividend yield.  Use 0.01 for 1%.  Default 0
:type q: float, optional</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Option vega</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.marketdata_processor">
<span id="pyqstrat-marketdata-processor-module"></span><h2>pyqstrat.marketdata_processor module<a class="headerlink" href="#module-pyqstrat.marketdata_processor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.marketdata_processor.PathFileNameProvider">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">PathFileNameProvider</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">include_pattern=None</em>, <em class="sig-param">exclude_pattern=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#PathFileNameProvider"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.PathFileNameProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A helper class that, given a pattern such as such as “/tmp/abc*.gz” and an optional include and exclude pattern,
returns names of all files that match</p>
<dl class="method">
<dt id="pyqstrat.marketdata_processor.PathFileNameProvider.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#PathFileNameProvider.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.PathFileNameProvider.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>All matching filenames</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.marketdata_processor.PathFileNameProvider.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">include_pattern=None</em>, <em class="sig-param">exclude_pattern=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#PathFileNameProvider.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.PathFileNameProvider.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A pattern such as “/tmp/abc*.gz”</p></li>
<li><p><strong>include_pattern</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Given a pattern such as “xzy”, will return only filenames that contain xyz</p></li>
<li><p><strong>exclude_pattern</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Given a pattern such as “_tmp”, will exclude all filenames containing _tmp</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.marketdata_processor.SingleDirectoryFileNameMapper">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">SingleDirectoryFileNameMapper</code><span class="sig-paren">(</span><em class="sig-param">output_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#SingleDirectoryFileNameMapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.SingleDirectoryFileNameMapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A helper class that provides a mapping from input filenames to their corresponding output filenames in an output directory.</p>
<dl class="method">
<dt id="pyqstrat.marketdata_processor.SingleDirectoryFileNameMapper.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">input_filepath</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#SingleDirectoryFileNameMapper.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.SingleDirectoryFileNameMapper.__call__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_filepath</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The input file that we are creating an output file for, e.g. “/home/xzy.gz”</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Output file path for that input.  We take the filename from the input filepath, strip out any extension</dt><dd><p>and prepend the output directory name</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.marketdata_processor.SingleDirectoryFileNameMapper.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">output_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#SingleDirectoryFileNameMapper.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.SingleDirectoryFileNameMapper.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>output_dir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The directory where we want to write output files</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.marketdata_processor.TextHeaderParser">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">TextHeaderParser</code><span class="sig-paren">(</span><em class="sig-param">record_generator_creator</em>, <em class="sig-param">skip_rows=0</em>, <em class="sig-param">separator='</em>, <em class="sig-param">'</em>, <em class="sig-param">make_lowercase=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#TextHeaderParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.TextHeaderParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parses column headers from a text file containing market data</p>
<dl class="method">
<dt id="pyqstrat.marketdata_processor.TextHeaderParser.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">input_filename</em>, <em class="sig-param">compression</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#TextHeaderParser.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.TextHeaderParser.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Args:</p>
<p>input_filename The file to read
compression: Compression type, e.g. “gzip”, or None if the file is not compressed</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Column headers</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.marketdata_processor.TextHeaderParser.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">record_generator_creator</em>, <em class="sig-param">skip_rows=0</em>, <em class="sig-param">separator='</em>, <em class="sig-param">'</em>, <em class="sig-param">make_lowercase=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#TextHeaderParser.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.TextHeaderParser.__init__" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record_generator</strong> – A function that takes a filename and its compression type and returns an object
that we can use to iterate through lines in that file</p></li>
<li><p><strong>skip_rows</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of rows to skip before starting to read the file.  Default is 0</p></li>
<li><p><strong>separator</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Separator for headers.  Defaults to ,</p></li>
<li><p><strong>make_lowercase</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to convert headers to lowercase before returning them</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.marketdata_processor.base_date_filename_mapper">
<code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">base_date_filename_mapper</code><span class="sig-paren">(</span><em class="sig-param">input_file_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#base_date_filename_mapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.base_date_filename_mapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function that parses out the date from a filename.  For example, given a file such as “/tmp/spx_2018-08-09”, this parses out the
date part of the filename and returns milliseconds (no fractions) since the epoch to that date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_filepath</strong> (<em>str</em>) – Full path to the input file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Milliseconds since unix epoch to the date implied by that file</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">base_date_filename_mapper</span><span class="p">(</span><span class="s2">&quot;/tmp/spy_1970-1-2_quotes.gz&quot;</span><span class="p">)</span>
<span class="go">86400000</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.marketdata_processor.create_text_file_processor">
<code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">create_text_file_processor</code><span class="sig-paren">(</span><em class="sig-param">record_generator</em>, <em class="sig-param">line_filter</em>, <em class="sig-param">record_parser</em>, <em class="sig-param">bad_line_handler</em>, <em class="sig-param">record_filter</em>, <em class="sig-param">missing_data_handler</em>, <em class="sig-param">aggregators</em>, <em class="sig-param">skip_rows=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#create_text_file_processor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.create_text_file_processor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.marketdata_processor.get_field_indices">
<code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">get_field_indices</code><span class="sig-paren">(</span><em class="sig-param">field_names</em>, <em class="sig-param">headers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#get_field_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.get_field_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to get indices of field names in a list of headers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field_names</strong> (<em>list of str</em>) – The fields we want indices of</p></li>
<li><p><strong>headers</strong> (<em>list of str</em>) – All headers</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>indices of each field name in the headers list</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.marketdata_processor.process_marketdata">
<code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">process_marketdata</code><span class="sig-paren">(</span><em class="sig-param">input_filename_provider</em>, <em class="sig-param">file_processor</em>, <em class="sig-param">num_processes=None</em>, <em class="sig-param">raise_on_error=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#process_marketdata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.process_marketdata" title="Permalink to this definition">¶</a></dt>
<dd><p>Top level function to process a set of market data files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_filename_provider</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]) – A function that returns a list of filenames (incl path) we need to process.</p></li>
<li><p><strong>file_processor</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A function that takes an input filename and processes it, returning number of lines processed.</p></li>
<li><p><strong>num_processes</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of processes to run to parse these files.  If set to None, we use the number of cores
present on your machine.  Defaults to None</p></li>
<li><p><strong>raise_on_error</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set, we raise an exception when there is a problem with parsing a file, so we can see a stack
trace and diagnose the problem.  If not set, we print the error and continue.  Defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.marketdata_processor.process_marketdata_file">
<code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">process_marketdata_file</code><span class="sig-paren">(</span><em class="sig-param">input_filename</em>, <em class="sig-param">compression</em>, <em class="sig-param">output_file_prefix_mapper</em>, <em class="sig-param">record_parser_creator</em>, <em class="sig-param">aggregator_creator</em>, <em class="sig-param">line_filter=None</em>, <em class="sig-param">base_date_mapper=None</em>, <em class="sig-param">file_processor_creator=&lt;function create_text_file_processor&gt;</em>, <em class="sig-param">header_parser_creator=&lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">header_record_generator=&lt;function text_file_record_generator_creator&gt;</em>, <em class="sig-param">record_generator=&lt;pyqstrat.pyqstrat_cpp.TextFileDecompressor object&gt;</em>, <em class="sig-param">bad_line_handler=&lt;pyqstrat.pyqstrat_cpp.PrintBadLineHandler object&gt;</em>, <em class="sig-param">record_filter=None</em>, <em class="sig-param">missing_data_handler=&lt;pyqstrat.pyqstrat_cpp.PriceQtyMissingDataHandler object&gt;</em>, <em class="sig-param">writer_creator=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#process_marketdata_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.process_marketdata_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes a single market data file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – File name (including path) to process</p></li>
<li><p><strong>compression</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Compression type for the input file.  If not set, we try to infer the compression type from the filename.</p></li>
<li><p><strong>output_file_prefix_mapper</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A function that takes an input filename and returns the corresponding output filename we want</p></li>
<li><p><strong>record_parser_creator</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]], <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>]]) – A function that takes a date and a list of column names and returns a
function that can take a list of fields and return a subclass of Record</p></li>
<li><p><strong>aggregator_creator</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Schema" title="pyqstrat.pyqstrat_cpp.Schema"><code class="xref py py-class docutils literal notranslate"><span class="pre">Schema</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Writer" title="pyqstrat.pyqstrat_cpp.Writer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Writer</span></code></a>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Aggregator</span></code></a>]]) – A function that takes a writer creator and returns a list of Aggregators</p></li>
<li><p><strong>line_filter</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>]]) – A function that takes a line and decides whether we want to keep it or discard it.  Defaults to None</p></li>
<li><p><strong>base_date_mapper</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – A function that takes an input filename and returns the date implied by the filename,
represented as millis since epoch.</p></li>
<li><p><strong>file_processor_creator</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code>]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]], <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code>], <a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>], <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Record" title="pyqstrat.pyqstrat_cpp.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>], <code class="docutils literal notranslate"><span class="pre">None</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<a class="reference internal" href="#pyqstrat.pyqstrat_cpp.Aggregator" title="pyqstrat.pyqstrat_cpp.Aggregator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Aggregator</span></code></a>]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – A function that returns an object that we can use to iterate through lines in a file.  Defaults to
helper function <a class="reference internal" href="#pyqstrat.marketdata_processor.create_text_file_processor" title="pyqstrat.marketdata_processor.create_text_file_processor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_text_file_processor</span></code></a></p></li>
<li><p><strong>header_record_generator</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code>]]]) – A function that takes a filename and compression and returns a generator that we can use to get column headers</p></li>
<li><p><strong>record_generator</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code>]]) – A function that takes a filename and compression and returns a generator that we
can use to iterate through lines in the file</p></li>
<li><p><strong>bad_line_handler</strong> (<em>optional</em>) – A function that takes a line that we could not parse, and either parses it or does something else
like recording debugging info, or stopping the processing by raising an exception.  Defaults to helper function
<code class="xref py py-obj docutils literal notranslate"><span class="pre">PrintBadLineHandler</span></code></p></li>
<li><p><strong>record_filter</strong> (<em>optional</em>) – A function that takes a parsed TradeRecord, QuoteRecord, OpenInterestRecord or OtherRecord and decides whether we
want to keep it or discard it.  Defaults to None</p></li>
<li><p><strong>missing_data_handler</strong> (<em>optional</em>) – A function that takes a parsed TradeRecord, QuoteRecord, OpenInterestRecord or OtherRecord, and decides
deals with any data that is missing in those records.  For example, 0 for bid could be replaced by NAN.  Defaults to helper function:
<code class="xref py py-obj docutils literal notranslate"><span class="pre">price_qty_missing_data_handler</span></code></p></li>
<li><p><strong>writer_creator</strong> (<em>optional</em>) – A function that takes an output_file_prefix, schema, whether to create a batch id file, and batch_size
and returns a subclass of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Writer</span></code>.  Defaults to <code class="xref py py-obj docutils literal notranslate"><span class="pre">HDF5WriterCreatorr</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.marketdata_processor.text_file_record_generator_creator">
<code class="sig-prename descclassname">pyqstrat.marketdata_processor.</code><code class="sig-name descname">text_file_record_generator_creator</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">compression=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/marketdata_processor.html#text_file_record_generator_creator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.marketdata_processor.text_file_record_generator_creator" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function that returns a generator that we can use to iterate through lines in the input file
:type filename: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param filename: The input filename
:type compression: <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]
:param compression: The compression type of the input file or None if its not compressed</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code>]]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.trade_bars">
<span id="pyqstrat-trade-bars-module"></span><h2>pyqstrat.trade_bars module<a class="headerlink" href="#module-pyqstrat.trade_bars" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.trade_bars.TradeBars">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.trade_bars.</code><code class="sig-name descname">TradeBars</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">c</em>, <em class="sig-param">o=None</em>, <em class="sig-param">h=None</em>, <em class="sig-param">l=None</em>, <em class="sig-param">v=None</em>, <em class="sig-param">vwap=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Used to store OHLCV bars.  You must at least supply timestamps and close prices.  All other fields are optional.</p>
<dl class="attribute">
<dt id="pyqstrat.trade_bars.TradeBars.timestamp">
<code class="sig-name descname">timestamp</code><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy datetime array with the datetime for each bar.  Must be monotonically increasing.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.trade_bars.TradeBars.c">
<code class="sig-name descname">c</code><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.c" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with close prices for the bar.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.trade_bars.TradeBars.o">
<code class="sig-name descname">o</code><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.o" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with open prices . Default None</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.trade_bars.TradeBars.h">
<code class="sig-name descname">h</code><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.h" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with high prices. Default None</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.trade_bars.TradeBars.l">
<code class="sig-name descname">l</code><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.l" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with high prices. Default None</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.trade_bars.TradeBars.v">
<code class="sig-name descname">v</code><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.v" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy integer array with volume for the bar. Default None</p>
</dd></dl>

<dl class="attribute">
<dt id="pyqstrat.trade_bars.TradeBars.vwap">
<code class="sig-name descname">vwap</code><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.vwap" title="Permalink to this definition">¶</a></dt>
<dd><p>A numpy float array with the volume weighted average price for the bar.  Default None</p>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em>, <em class="sig-param">c</em>, <em class="sig-param">o=None</em>, <em class="sig-param">h=None</em>, <em class="sig-param">l=None</em>, <em class="sig-param">v=None</em>, <em class="sig-param">vwap=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Zeroes in o, h, l, c are set to nan</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.add_timestamps">
<code class="sig-name descname">add_timestamps</code><span class="sig-paren">(</span><em class="sig-param">timestamps</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.add_timestamps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.add_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds new timestamps to a market data object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamps</strong> (<em>np.array of np.datetime64</em>) – New timestamps to add.  Does not have to be sorted or unique</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-10&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[ns]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">8.1</span><span class="p">,</span> <span class="mf">8.2</span><span class="p">,</span> <span class="mf">8.3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trade_bar</span> <span class="o">=</span> <span class="n">TradeBars</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">o</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_timestamps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-01-07&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-01-09&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[ns]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trade_bar</span><span class="o">.</span><span class="n">add_timestamps</span><span class="p">(</span><span class="n">new_timestamps</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">trade_bar</span><span class="o">.</span><span class="n">timestamps</span><span class="p">)</span>
<span class="go">[&#39;2018-01-05T00:00:00.000000000&#39; &#39;2018-01-07T00:00:00.000000000&#39;</span>
<span class="go"> &#39;2018-01-09T00:00:00.000000000&#39; &#39;2018-01-10T00:00:00.000000000&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">formatter</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{x:.4f}</span><span class="s1">&#39;</span><span class="p">})</span>  <span class="c1"># After numpy 1.13 positive floats don&#39;t have a leading space for sign</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">trade_bar</span><span class="o">.</span><span class="n">o</span><span class="p">,</span> <span class="n">trade_bar</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
<span class="go">[9.0000 nan 10.0000 11.0000] [8.1000 nan 8.2000 8.3000]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.describe">
<code class="sig-name descname">describe</code><span class="sig-paren">(</span><em class="sig-param">warn_std=10</em>, <em class="sig-param">time_distribution_frequency='15 min'</em>, <em class="sig-param">print_time_distribution=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.describe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Describe the bars.  Shows an overview, errors and warnings for the bar data.  This is a good function to use
before running any backtests on a set of bar data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warn_std</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – See warning function</p></li>
<li><p><strong>time_distribution_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – See time_distribution function</p></li>
<li><p><strong>print_time_distribution</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to print the time distribution in addition to plotting it.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.df">
<code class="sig-name descname">df</code><span class="sig-paren">(</span><em class="sig-param">start_date=None</em>, <em class="sig-param">end_date=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.df" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.errors">
<code class="sig-name descname">errors</code><span class="sig-paren">(</span><em class="sig-param">display=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.errors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe indicating any highs that are lower than opens, closes, lows or lows that are higher than other columns
Also includes any ohlcv values that are negative</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.freq_str">
<code class="sig-name descname">freq_str</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.freq_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.freq_str" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.has_ohlc">
<code class="sig-name descname">has_ohlc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.has_ohlc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.has_ohlc" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if we have all ohlc columns and none are empty</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.overview">
<code class="sig-name descname">overview</code><span class="sig-paren">(</span><em class="sig-param">display=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.overview"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.overview" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe showing basic information about the data, including count, number and percent missing, min, max</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>display</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to print out the warning dataframe as well as returning it</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">figsize=(15</em>, <em class="sig-param">8)</em>, <em class="sig-param">date_range=None</em>, <em class="sig-param">sampling_frequency=None</em>, <em class="sig-param">title='Price / Volume'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a candlestick or line plot depending on whether we have ohlc data or just close prices</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – Size of the figure (default (15,8))</p></li>
<li><p><strong>date_range</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code>], <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – A tuple of strings or numpy datetimes for plotting a smaller sample of the data, e.g. (“2018-01-01”, “2018-01-06”)</p></li>
<li><p><strong>sampling_frequency</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Downsample before plotting.  See pandas frequency strings for possible values.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Title of the graph, default “Price / Volume”</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.resample">
<code class="sig-name descname">resample</code><span class="sig-paren">(</span><em class="sig-param">sampling_frequency</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.resample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsample the trade bars data into a new bar frequency</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sampling_frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – See sampling frequency in pandas</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#pyqstrat.trade_bars.TradeBars" title="pyqstrat.trade_bars.TradeBars"><code class="xref py py-class docutils literal notranslate"><span class="pre">TradeBars</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.time_distribution">
<code class="sig-name descname">time_distribution</code><span class="sig-paren">(</span><em class="sig-param">frequency='15 minutes'</em>, <em class="sig-param">display=True</em>, <em class="sig-param">plot=True</em>, <em class="sig-param">figsize=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.time_distribution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.time_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dataframe with the time distribution of the bars</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frequency</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The width of each bin (default “15 minutes”).  You can use hours or days as well.</p></li>
<li><p><strong>display</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to display the data in addition to returning it.</p></li>
<li><p><strong>plot</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to plot the data in addition to returning it.</p></li>
<li><p><strong>figsize</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – If plot is set, optional figure size for the plot (default (20,8))</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.valid_row">
<code class="sig-name descname">valid_row</code><span class="sig-paren">(</span><em class="sig-param">i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.valid_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.valid_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the row with index i has no nans in it.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.trade_bars.TradeBars.warnings">
<code class="sig-name descname">warnings</code><span class="sig-paren">(</span><em class="sig-param">warn_std=10</em>, <em class="sig-param">display=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#TradeBars.warnings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.TradeBars.warnings" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe indicating any values where the bar over bar change is more than warn_std standard deviations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warn_std</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of standard deviations to use as a threshold (default 10)</p></li>
<li><p><strong>display</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Whether to print out the warning dataframe as well as returning it</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.trade_bars.roll_futures">
<code class="sig-prename descclassname">pyqstrat.trade_bars.</code><code class="sig-name descname">roll_futures</code><span class="sig-paren">(</span><em class="sig-param">fut_prices</em>, <em class="sig-param">date_func</em>, <em class="sig-param">condition_func</em>, <em class="sig-param">expiries=None</em>, <em class="sig-param">return_full_df=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#roll_futures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.roll_futures" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a continuous futures dataframe with one row per datetime given rolling logic</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fut_prices</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – A dataframe containing the columns ‘date’, ‘series’, and any other market data,
for example, ohlcv data. Date can contain time for sub-daily bars.
The series column must contain a different string name for each futures series, e.g. SEP2018, DEC2018, etc.</p></li>
<li><p><strong>date_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – A function that takes the future prices as an input and returns a numpy array of booleans
True indicates that the future should be rolled on this date if the condition specified in condition_func is met.
This function can assume that we have all the columns in the original market data object plus the same
columns suffixed with _next for the potential series to roll over to.</p></li>
<li><p><strong>condition_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – A function that takes the future prices as input and returns a numpy array of booleans.
True indicates that we should try to roll the future at that row.</p></li>
<li><p><strong>expiries</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]) – An optional dataframe with 2 columns, ‘series’ and ‘expiry’.  This should have one row per future series
indicating that future’s expiry date.
If you don’t pass this in, the function will assume that the expiry column is present in the original dataframe.</p></li>
<li><p><strong>return_full_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If set, will return the datframe without removing extra timestamps so you can use your own logic for rolling,
including the _next columns and the roll flag</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A pandas DataFrame with one row per date, which contains the columns in the original md DataFrame and the same columns suffixed with _next</dt><dd><p>representing the series we want to roll to.  There is also a column called roll_flag which is set to True whenever
the date and roll condition functions are met.</p>
</dd>
</dl>
</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fut_prices</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-11&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-16&#39;</span><span class="p">)),</span>
<span class="gp">... </span>                                          <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-11&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-16&#39;</span><span class="p">)))),</span>
<span class="gp">... </span>                  <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mf">10.1</span><span class="p">,</span> <span class="mf">10.2</span><span class="p">,</span> <span class="mf">10.3</span><span class="p">,</span> <span class="mf">10.4</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mf">10.35</span><span class="p">,</span> <span class="mf">10.45</span><span class="p">,</span> <span class="mf">10.55</span><span class="p">,</span> <span class="mf">10.65</span><span class="p">,</span> <span class="mf">10.75</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="s1">&#39;v&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">300</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="s1">&#39;series&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;MAR2018&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;JUN2018&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">})[[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">,</span><span class="s1">&#39;series&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expiries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;2018-03-15&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-06-15&#39;</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;M8[D]&#39;</span><span class="p">),</span> <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MAR2018&#39;</span><span class="p">,</span> <span class="s1">&#39;JUN2018&#39;</span><span class="p">],</span> <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;expiry&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">date_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">fut_prices</span><span class="p">:</span> <span class="n">fut_prices</span><span class="o">.</span><span class="n">expiry</span> <span class="o">-</span> <span class="n">fut_prices</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">condition_func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">fut_prices</span><span class="p">:</span> <span class="n">fut_prices</span><span class="o">.</span><span class="n">v_next</span> <span class="o">&gt;</span> <span class="n">fut_prices</span><span class="o">.</span><span class="n">v</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">roll_futures</span><span class="p">(</span><span class="n">fut_prices</span><span class="p">,</span> <span class="n">date_func</span><span class="p">,</span> <span class="n">condition_func</span><span class="p">,</span> <span class="n">expiries</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">series</span> <span class="o">==</span> <span class="s1">&#39;MAR2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-14&#39;</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">series</span> <span class="o">==</span> <span class="s1">&#39;JUN2018&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-15&#39;</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.trade_bars.sort_trade_bars">
<code class="sig-prename descclassname">pyqstrat.trade_bars.</code><code class="sig-name descname">sort_trade_bars</code><span class="sig-paren">(</span><em class="sig-param">columns</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#sort_trade_bars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.sort_trade_bars" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of column names, sort them in olhcv order</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.trade_bars.test_trade_bars">
<code class="sig-prename descclassname">pyqstrat.trade_bars.</code><code class="sig-name descname">test_trade_bars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/trade_bars.html#test_trade_bars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.trade_bars.test_trade_bars" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat.markets">
<span id="pyqstrat-markets-module"></span><h2>pyqstrat.markets module<a class="headerlink" href="#module-pyqstrat.markets" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="pyqstrat.markets.EminiFuture">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.markets.</code><code class="sig-name descname">EminiFuture</code><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="pyqstrat.markets.EminiFuture.calendar">
<code class="sig-name descname">calendar</code><em class="property"> = &lt;pyqstrat.holiday_calendars.Calendar object&gt;</em><a class="headerlink" href="#pyqstrat.markets.EminiFuture.calendar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.markets.EminiFuture.get_current_symbol">
<em class="property">static </em><code class="sig-name descname">get_current_symbol</code><span class="sig-paren">(</span><em class="sig-param">curr_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture.get_current_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture.get_current_symbol" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_current_symbol</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;ESH9&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_current_symbol</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;ESM9&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.markets.EminiFuture.get_expiry">
<em class="property">static </em><code class="sig-name descname">get_expiry</code><span class="sig-paren">(</span><em class="sig-param">fut_symbol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture.get_expiry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture.get_expiry" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_expiry</span><span class="p">(</span><span class="s1">&#39;ESH8&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2018-03-16T08:30&#39;</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.markets.EminiFuture.get_next_symbol">
<em class="property">static </em><code class="sig-name descname">get_next_symbol</code><span class="sig-paren">(</span><em class="sig-param">curr_future_symbol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture.get_next_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture.get_next_symbol" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_next_symbol</span><span class="p">(</span><span class="s1">&#39;ESZ8&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ESH9&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.markets.EminiFuture.get_previous_symbol">
<em class="property">static </em><code class="sig-name descname">get_previous_symbol</code><span class="sig-paren">(</span><em class="sig-param">curr_future_symbol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiFuture.get_previous_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.EminiFuture.get_previous_symbol" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span><span class="p">(</span><span class="n">EminiFuture</span><span class="o">.</span><span class="n">get_previous_symbol</span><span class="p">(</span><span class="s1">&#39;ESH9&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ESZ8&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyqstrat.markets.EminiOption">
<em class="property">class </em><code class="sig-prename descclassname">pyqstrat.markets.</code><code class="sig-name descname">EminiOption</code><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiOption"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.EminiOption" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="pyqstrat.markets.EminiOption.calendar">
<code class="sig-name descname">calendar</code><em class="property"> = &lt;pyqstrat.holiday_calendars.Calendar object&gt;</em><a class="headerlink" href="#pyqstrat.markets.EminiOption.calendar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pyqstrat.markets.EminiOption.decode_symbol">
<em class="property">static </em><code class="sig-name descname">decode_symbol</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiOption.decode_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.EminiOption.decode_symbol" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EminiOption</span><span class="o">.</span><span class="n">decode_symbol</span><span class="p">(</span><span class="s1">&#39;E1AF8&#39;</span><span class="p">)</span>
<span class="go">(MO, 2018, 1, 1)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">weekday</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyqstrat.markets.EminiOption.get_expiry">
<em class="property">static </em><code class="sig-name descname">get_expiry</code><span class="sig-paren">(</span><em class="sig-param">symbol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#EminiOption.get_expiry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.EminiOption.get_expiry" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">EminiOption</span><span class="o">.</span><span class="n">get_expiry</span><span class="p">(</span><span class="s1">&#39;EW2Z5&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2015-12-11T15:00&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EminiOption</span><span class="o">.</span><span class="n">get_expiry</span><span class="p">(</span><span class="s1">&#39;E3AF7&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2017-01-17T15:00&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">EminiOption</span><span class="o">.</span><span class="n">get_expiry</span><span class="p">(</span><span class="s1">&#39;EWF0&#39;</span><span class="p">)</span>
<span class="go">numpy.datetime64(&#39;2020-01-31T15:00&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime64</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyqstrat.markets.future_code_to_month">
<code class="sig-prename descclassname">pyqstrat.markets.</code><code class="sig-name descname">future_code_to_month</code><span class="sig-paren">(</span><em class="sig-param">future_code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#future_code_to_month"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.future_code_to_month" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a future code such as “X”, return the month abbreviation, such as “nov”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>future_code</strong> (<em>str</em>) – the one letter future code</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">future_code_to_month</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="go">&#39;nov&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.markets.future_code_to_month_number">
<code class="sig-prename descclassname">pyqstrat.markets.</code><code class="sig-name descname">future_code_to_month_number</code><span class="sig-paren">(</span><em class="sig-param">future_code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#future_code_to_month_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.future_code_to_month_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a future code such as “X”, return the month number (from 1 - 12)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>future_code</strong> (<em>str</em>) – the one letter future code</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">future_code_to_month_number</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="go">11</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyqstrat.markets.get_future_code">
<code class="sig-prename descclassname">pyqstrat.markets.</code><code class="sig-name descname">get_future_code</code><span class="sig-paren">(</span><em class="sig-param">month</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyqstrat/markets.html#get_future_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyqstrat.markets.get_future_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a month number such as 3 for March, return the future code for it, e.g. H
&gt;&gt;&gt; get_future_code(3)
‘H’</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pyqstrat">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pyqstrat" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyqstrat</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">pyqstrat</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">pyqstrat package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">pyqstrat</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">pyqstrat</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Sal Abbasi.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/pyqstrat.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>